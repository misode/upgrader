{"version":3,"file":"index.e345ca60.js","sources":["../../src/components/Config.tsx","../../src/components/Octicon.tsx","../../src/Version.ts","../../src/Fix.ts","../../src/fixes/1.17/Carver.ts","../../src/fixes/1.17/DimensionType.ts","../../src/fixes/1.17/Feature.ts","../../src/fixes/1.17/Function.ts","../../src/fixes/1.17/Ids.ts","../../src/fixes/1.17/NoiseSettings.ts","../../src/fixes/1.17/Predicates.ts","../../src/fixes/1.17/StructureFeature.ts","../../src/fixes/1.17/index.ts","../../src/fixes/1.17/PackFormat.ts","../../src/fixes/1.18/index.ts","../../src/fixes/index.ts","../../src/Pack.ts","../../src/components/PackCard.tsx","../../src/components/VersionPicker.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["\n\nexport function Config({ name, value, onChange }: { name: string, value: boolean, onChange: (value: boolean) => unknown }) {\n\treturn <label class=\"config\">\t\n\t\t<input type=\"checkbox\" checked={value} onChange={(e) => onChange((e.target as any).checked )} />\n\t\t{name}\n\t</label>\n}\n","export const Octicon = {\n\talert: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path></svg>,\n\tdownload: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z\"></path></svg>,\n\tsync: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z\"></path></svg>,\t\n\tx: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z\"></path></svg>,\n}\n","export const Versions = ['1.16.5', '1.17.1', '21w44a', '1.18-pre1'] as const\nexport type Version = typeof Versions[number]\n\nexport namespace Version {\n\texport function ord(version: Version): number {\n\t\treturn Versions.indexOf(version)\n\t}\n\n\texport function order(before: Version, after: Version) {\n\t\treturn ord(before) < ord(after)\n\t}\n\n\texport function intersects(source: Version, target: Version, from: Version, to: Version) {\n\t\treturn ord(source) <= ord(from) && ord(target) >= ord(to)\n\t}\n}\n","import type { categories, Pack } from './Pack'\nimport { Version } from './Version'\n\nexport type Fix = (pack: Pack, ctx: FixContext) => unknown\n\nexport namespace Fix {\n\t/**\n\t * Runs each fix after each other\n\t */\n\texport function all(...fixes: Fix[]): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tfixes.forEach(fix => fix(pack, ctx))\n\t\t}\n\t}\n\n\t/**\n\t * A simple fix that runs on one file category\n\t */\n\texport function onFile(category: typeof categories[number] | 'functions', fix: (data: any, ctx: FixContext) => unknown): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tfor (const { name, data } of pack.data[category]) {\n\t\t\t\tconst fileCtx = {\n\t\t\t\t\t...ctx,\n\t\t\t\t\twarn: (message: string) => ctx.warn(`${name} ${message}`),\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tfix(data, fileCtx)\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconst error = new Error(`Error fixing ${category.replace(/^worldgen\\//, '').replaceAll('_', ' ')} ${name}: ${e.message}`)\n\t\t\t\t\terror.stack = e.stack\n\t\t\t\t\tthrow error\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\texport function when(key: keyof FixConfig, ...fixes: Fix[]): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tif (ctx.config(key)) {\n\t\t\t\tfixes.forEach(fix => fix(pack, ctx))\n\t\t\t}\n\t\t}\n\t}\n\n\texport function assert(predicate: (pack: Pack, ctx: FixContext) => boolean, message: string): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tif (!predicate(pack, ctx)) {\n\t\t\t\tconsole.log('assertion failed...', pack.meta)\n\t\t\t\tthrow new Error(message)\n\t\t\t}\n\t\t}\n\t}\n\n\texport function version(from: Version, to: Version, ...fixes: Fix[]): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tif (Version.intersects(ctx.source(), ctx.target(), from, to)) {\n\t\t\t\tfixes.forEach(fix => fix(pack, ctx))\n\t\t\t}\n\t\t}\n\t}\n\n\texport function debug(message: string): Fix {\n\t\treturn () => {\n\t\t\tconsole.debug(message)\n\t\t}\n\t}\n}\n\nexport type FixConfig = {\n\tfunctions: boolean,\n\tids: boolean,\n\tpredicates: boolean,\n\tworldgen: boolean,\n\tpackFormat: boolean,\n}\n\nexport interface FixContext {\n\twarn: (message: string) => unknown\n\tconfig: (key: keyof FixConfig) => boolean\n\tsource: () => Version,\n\ttarget: () => Version,\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Adds the new config properties to configured carvers\n */\nexport const Carver = Fix.all(\n\tFix.onFile('worldgen/configured_carver', fixCarver),\n\tFix.onFile('worldgen/biome', (data) => {\n\t\tif (typeof data.carvers === 'object') {\n\t\t\tdata.carvers.air?.forEach(fixCarver)\n\t\t\tdata.carvers.liquid?.forEach(fixCarver)\n\t\t}\n\t}),\n)\n\nfunction fixCarver(data: any) {\n\tif (typeof data !== 'object') return\n\tconst type = data.type.replace(/^minecraft:/, '')\n\n\tdata.config.lava_level = { above_bottom: 10 }\n\tdata.config.aquifers_enabled = false\n\tif (type === 'cave' || type === 'underwater_cave' || type === 'nether_cave') {\n\t\tif (type === 'nether_cave') {\n\t\t\tdata.config.y = {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tmin_inclusive: { absolute: 0 },\n\t\t\t\tmax_inclusive: { below_top: 1 },\n\t\t\t}\n\t\t} else {\n\t\t\tdata.config.y = {\n\t\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\t\tmin_inclusive: { absolute: 0 },\n\t\t\t\tmax_inclusive: { absolute: 127 },\n\t\t\t\tinner: 8,\n\t\t\t}\n\t\t}\n\t\tdata.config.yScale = 0.5\n\t\tdata.config.horizontal_radius_multiplier = 1\n\t\tdata.config.vertical_radius_multiplier = 1\n\t\tdata.config.floor_level = -0.7\n\t} else {\n\t\tdata.config.y = {\n\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\tmin_inclusive: { absolute: 20 },\n\t\t\tmax_inclusive: { absolute: 67 },\n\t\t\tinner: 8,\n\t\t}\n\t\tdata.config.yScale = 3\n\t\tdata.config.vertical_rotation = {\n\t\t\ttype: 'minecraft:uniform',\n\t\t\tvalue: { min_inclusive: -0.125, max_exclusive: 0.125 },\n\t\t}\n\t\tdata.config.shape = {\n\t\t\tdistance_factor: {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: { min_inclusive: 0.75, max_exclusive: 1 },\n\t\t\t},\n\t\t\tthickness: {\n\t\t\t\ttype: 'minecraft:trapezoid',\n\t\t\t\tvalue: { min: 0, max: 6, plateau: 2 },\n\t\t\t},\n\t\t\twidth_smoothness: 3,\n\t\t\thorizontal_radius_factor: {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: { min_inclusive: 0.75, max_exclusive: 1 },\n\t\t\t},\n\t\t\tvertical_radius_default_factor: 1,\n\t\t\tvertical_radius_center_factor: 0,\n\t\t}\n\t}\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Adds the \"min_y\" and \"height\" properties to dimension types\n */\nexport const DimensionType = Fix.all(\n\tFix.onFile('dimension_type', fixDimensionType),\n\tFix.onFile('dimension', (data) => {\n\t\tif (typeof data.type === 'object') {\n\t\t\tfixDimensionType(data.type)\n\t\t}\n\t}),\n)\n\nfunction fixDimensionType(data: any) {\n\tdata.min_y = 0\n\tdata.height = 256\n}\n","import type { FixContext } from '../../Fix'\nimport { Fix } from '../../Fix'\n\nexport const Feature = Fix.all(\n\tFix.onFile('worldgen/configured_feature', fixFeature),\n\tFix.onFile('worldgen/biome', (data) => {\n\t\tif (Array.isArray(data.starts)) {\n\t\t\tdata.starts.forEach(fixFeature)\n\t\t}\n\t}),\n)\n\nfunction fixFeature(data: any, ctx: FixContext) {\n\tif (typeof data !== 'object') return\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'basalt_columns':\n\t\t\tfixUniformInt(data.config, 'reach')\n\t\t\tfixUniformInt(data.config, 'height')\n\t\t\tbreak\n\t\tcase 'decorated':\n\t\t\tfixDecorator(data.config.decorator, ctx)\n\t\t\tfixFeature(data.config.feature, ctx)\n\t\t\tbreak\n\t\tcase 'delta_feature':\n\t\t\tfixUniformInt(data.config, 'size')\n\t\t\tfixUniformInt(data.config, 'rim_size')\n\t\t\tbreak\n\t\tcase 'disk':\n\t\tcase 'ice_patch':\n\t\t\tfixUniformInt(data.config, 'radius')\n\t\t\tbreak\n\t\tcase 'emerald_ore':\n\t\t\tdata.type = 'minecraft:replace_single_block',\n\t\t\tdata.config = { targets: [ {\n\t\t\t\ttarget: {\n\t\t\t\t\tpredicate_type: 'minecraft:blockstate_match',\n\t\t\t\t\tblock_state: data.config.target,\n\t\t\t\t},\n\t\t\t\tstate: data.config.state,\n\t\t\t} ] }\n\t\t\tbreak\n\t\tcase 'flower':\n\t\tcase 'no_bonemeal_flower':\n\t\tcase 'random_patch':\n\t\t\tconst placer = data.config.block_placer\n\t\t\tif (placer.type.replace(/^minecraft:/, '') === 'column_placer') {\n\t\t\t\tplacer.size = {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\tmin_inclusive: placer.min_size,\n\t\t\t\t\t\tmax_inclusive: placer.min_size + placer.extra_size,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t\tdelete placer.min_size\n\t\t\t\tdelete placer.extra_size\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'fossil':\n\t\t\tdata.config = {\n\t\t\t\tmax_empty_corners_allowed: 4,\n\t\t\t\tfossil_processors: 'minecraft:fossil_rot',\n\t\t\t\toverlay_processors: 'minecraft:fossil_coal',\n\t\t\t\tfossil_structures: [\n\t\t\t\t\t'minecraft:fossil/spine_1',\n\t\t\t\t\t'minecraft:fossil/spine_2',\n\t\t\t\t\t'minecraft:fossil/spine_3',\n\t\t\t\t\t'minecraft:fossil/spine_4',\n\t\t\t\t\t'minecraft:fossil/skull_1',\n\t\t\t\t\t'minecraft:fossil/skull_2',\n\t\t\t\t\t'minecraft:fossil/skull_3',\n\t\t\t\t\t'minecraft:fossil/skull_4',\n\t\t\t\t],\n\t\t\t\toverlay_structures: [\n\t\t\t\t\t'minecraft:fossil/spine_1_coal',\n\t\t\t\t\t'minecraft:fossil/spine_2_coal',\n\t\t\t\t\t'minecraft:fossil/spine_3_coal',\n\t\t\t\t\t'minecraft:fossil/spine_4_coal',\n\t\t\t\t\t'minecraft:fossil/skull_1_coal',\n\t\t\t\t\t'minecraft:fossil/skull_2_coal',\n\t\t\t\t\t'minecraft:fossil/skull_3_coal',\n\t\t\t\t\t'minecraft:fossil/skull_4_coal',\n\t\t\t\t],\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'netherrack_replace_blobs':\n\t\t\tconst r = data.config.radius\n\t\t\tlet min = typeof r === 'number' ? r : r.base\n\t\t\tlet max = typeof r === 'number' ? r : r.base + r.spread\n\t\t\tif (max > 12) {\n\t\t\t\tctx.warn('Feature \"netherrack_replace_blobs\" no longer allows values above 12. Consider increasing the count of this feature.')\n\t\t\t\tmin = Math.min(12, min)\n\t\t\t\tmax = Math.min(12, max)\n\t\t\t}\n\t\t\tif (min === max) {\n\t\t\t\tdata.config.radius = min\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdata.config.radius = {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: {\n\t\t\t\t\tmin_inclusive: min,\n\t\t\t\t\tmax_inclusive: max,\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'no_surface_ore':\n\t\t\tfixOre(data)\n\t\t\tdata.type = 'minecraft:ore'\n\t\t\tdata.config.discard_chance_on_air_exposure = 1\n\t\t\tbreak\n\t\tcase 'ore':\n\t\t\tfixOre(data)\n\t\t\tbreak\n\t\tcase 'random_boolean_selector':\n\t\t\tfixFeature(data.config.feature_false, ctx)\n\t\t\tfixFeature(data.config.feature_true, ctx)\n\t\t\tbreak\n\t\tcase 'random_selector':\n\t\t\tdata.config.features.forEach((e: any) => fixFeature(e.feature, ctx))\n\t\t\tfixFeature(data.config.default, ctx)\n\t\t\tbreak\n\t\tcase 'sea_pickle':\n\t\t\tfixUniformInt(data.config, 'count')\n\t\t\tbreak\n\t\tcase 'simple_block':\n\t\t\tdata.config.to_place = {\n\t\t\t\ttype: 'minecraft:simple_state_provider',\n\t\t\t\tstate: data.config.to_place,\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'simple_random_selector':\n\t\t\tdata.config.features.forEach((feature: any) => fixFeature(feature, ctx))\n\t\t\tbreak\n\t\tcase 'tree':\n\t\t\t['radius', 'offset', 'crown_height', 'height', 'trunk_height']\n\t\t\t\t.forEach(k => fixUniformInt(data.config.foliage_placer, k))\n\t\t\tdata.config.foliage_provider = data.config.leaves_provider\n\t\t\tdelete data.config.leaves_provider\n\t\t\tdata.config.force_dirt = false\n\t\t\tdata.config.dirt_provider = {\n\t\t\t\ttype: 'minecraft:simple_state_provider',\n\t\t\t\tstate: {\n\t\t\t\t\tName: 'minecraft:dirt',\n\t\t\t\t},\n\t\t\t}\n\t\t\tdata.config.sapling_provider = {\n\t\t\t\ttype: 'minecraft:simple_state_provider',\n\t\t\t\tstate: {\n\t\t\t\t\tName: getSapling(data.config.foliage_provider),\n\t\t\t\t\tProperties: {\n\t\t\t\t\t\tstage: '0',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = {\n\t\t\t\tdecorator: {\n\t\t\t\t\ttype: 'decorated',\n\t\t\t\t\tconfig: combinedDecorators(\n\t\t\t\t\t\t{ type: 'minecraft:water_depth_threshold', config: {\n\t\t\t\t\t\t\tmax_water_depth: data.config.max_water_depth,\n\t\t\t\t\t\t} },\n\t\t\t\t\t\t{ type: 'minecraft:heightmap', config: {\n\t\t\t\t\t\t\theightmap: data.config.heightmap,\n\t\t\t\t\t\t} }\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\tfeature: {\n\t\t\t\t\ttype: 'minecraft:tree',\n\t\t\t\t\tconfig: data.config,\n\t\t\t\t},\n\t\t\t}\n\t\t\tdelete data.config.feature.config.max_water_depth\n\t\t\tdelete data.config.feature.config.heightmap\n\t\t\tbreak\n\t}\n}\n\nfunction fixUniformInt(data: any, key: string) {\n\tif (typeof data?.[key] === 'object') {\n\t\tdata[key] = {\n\t\t\ttype: 'minecraft:uniform',\n\t\t\tvalue: {\n\t\t\t\tmin_inclusive: data[key].base,\n\t\t\t\tmax_inclusive: data[key].base + data[key].spread,\n\t\t\t},\n\t\t}\n\t}\n}\n\nfunction fixOre(data: any) {\n\tdata.config.discard_chance_on_air_exposure = 0\n\tdata.config.targets = [{\n\t\ttarget: data.config.target,\n\t\tstate: data.config.state,\n\t}]\n\tdelete data.config.target\n\tdelete data.config.state\n}\n\nfunction getSapling(foliage: any) {\n\tif (foliage.type.replace(/^minecraft:/, '') === 'simple_state_provider') {\n\t\tconst match = foliage.state.Name.match(/^(?:minecraft:)?([a-z_]+)_leaves/)\n\t\tif (match) {\n\t\t\treturn `minecraft:${match[1]}_sapling`\n\t\t}\n\t}\n\treturn 'minecraft:oak_sapling'\n}\n\nfunction fixDecorator(data: any, ctx: FixContext) {\n\tif (typeof data !== 'object') return\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'carving_mask':\n\t\t\tif (data.config.probability === 0) {\n\t\t\t\tdata.type = 'minecraft:nope'\n\t\t\t\tdata.config = {}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tconst chance = 1 / data.config.probability\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:carving_mask', config: { step: data.config.step } },\n\t\t\t\t...Number.isInteger(chance) ? [\n\t\t\t\t\t{ type: 'minecraft:chance', config: { chance: chance } },\n\t\t\t\t] : [\n\t\t\t\t\t{ type: 'minecraft:count_extra', config: {\n\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\textra_count: 1,\n\t\t\t\t\t\textra_chance: data.config.probability,\n\t\t\t\t\t} },\n\t\t\t\t]\n\t\t\t)\n\t\t\tdelete data.config.probability\n\t\t\tbreak\n\t\tcase 'count':\n\t\tcase 'count_multilayer':\n\t\t\tconst c = data.config.count\n\t\t\tlet min0 = typeof c === 'number' ? c : c.base\n\t\t\tlet max0 = typeof c === 'number' ? c : c.base + c.spread\n\t\t\tif (min0 < 0) {\n\t\t\t\tctx.warn(`Decorator \"${type}\" no longer allows negative values.`)\n\t\t\t\tmin0 = Math.max(0, min0)\n\t\t\t\tmax0 = Math.max(0, max0)\n\t\t\t}\n\t\t\tif (min0 === max0) {\n\t\t\t\tdata.config.count = min0\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdata.config.count = {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: {\n\t\t\t\t\tmin_inclusive: min0,\n\t\t\t\t\tmax_inclusive: max0,\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'decorated':\n\t\t\tfixDecorator(data.config.outer, ctx)\n\t\t\tfixDecorator(data.config.inner, ctx)\n\t\t\tbreak\n\t\tcase 'heightmap_world_surface':\n\t\t\tdata.type = 'minecraft:heightmap'\n\t\t\tdata.config = { heightmap: 'WORLD_SURFACE_WG' }\n\t\t\tbreak\n\t\tcase 'top_solid_heightmap':\n\t\t\tdata.type = 'minecraft:heightmap'\n\t\t\tdata.config = { heightmap: 'OCEAN_FLOOR_WG' }\n\t\t\tbreak\n\t\tcase 'heightmap':\n\t\tcase 'heightmap_spread_double':\n\t\t\tdata.config = { heightmap: 'MOTION_BLOCKING' }\n\t\t\tbreak\n\t\tcase 'water_lake':\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:chance', config: { chance: data.config.chance } },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\t\t\tmin_inclusive: { absolute: 0 },\n\t\t\t\t\tmax_inclusive: { absolute: 256 },\n\t\t\t\t\tinner: 8,\n\t\t\t\t} } }\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'lava_lake':\n\t\t\tconst chance2 = data.config.chance / 10\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t...Number.isInteger(chance2) ? [\n\t\t\t\t\t{ type: 'minecraft:chance', config: { chance: chance2 } },\n\t\t\t\t] : [\n\t\t\t\t\t{ type: 'minecraft:count_extra', config: {\n\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\textra_count: 1,\n\t\t\t\t\t\textra_chance: 1 / chance2,\n\t\t\t\t\t} },\n\t\t\t\t],\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\t\t\tmin_inclusive: { absolute: 0 },\n\t\t\t\t\tmax_inclusive: { absolute: 256 },\n\t\t\t\t\tinner: 8,\n\t\t\t\t} } },\n\t\t\t\t{ type: 'minecraft:lava_lake', config: { chance: 10 } },\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'fire':\n\t\t\tconst count = typeof data.config.count === 'number' ? data.config.count : data.config.count.base + data.config.count.spread / 2\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:count', config: { count: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom', value: {\n\t\t\t\t\t\tmin_inclusive: 0,\n\t\t\t\t\t\tmax_inclusive: Math.ceil(count / 2),\n\t\t\t\t\t},\n\t\t\t\t} } },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: 4 },\n\t\t\t\t\tmax_inclusive: { absolute: 252 },\n\t\t\t\t} } },\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'glowstone':\n\t\t\tconst count2 = typeof data.config.count === 'number' ? data.config.count : data.config.count.base + data.config.count.spread / 2\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:count', config: { count: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom', value: {\n\t\t\t\t\t\tmin_inclusive: 0,\n\t\t\t\t\t\tmax_inclusive: Math.ceil(count2 - 1),\n\t\t\t\t\t},\n\t\t\t\t} } },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: 4 },\n\t\t\t\t\tmax_inclusive: { absolute: 252 },\n\t\t\t\t} } },\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'range':\n\t\t\tconst min = data.config.bottom_offset\n\t\t\tconst max = data.config.bottom_offset + data.config.maximum - data.config.top_offset - 1\n\t\t\tif (min === max) {\n\t\t\t\tdata.config = {\n\t\t\t\t\theight: { absolute: min },\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdata.config = {\n\t\t\t\theight: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: min },\n\t\t\t\t\tmax_inclusive: { absolute: max },\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'range_biased':\n\t\t\tconst min2 = data.config.bottom_offset\n\t\t\tconst max2 = data.config.bottom_offset + data.config.maximum - data.config.top_offset - 1\n\t\t\tdata.type = 'minecraft:range'\n\t\t\tdata.config = {\n\t\t\t\theight: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\t\t\tmin_inclusive: { absolute: min2 },\n\t\t\t\t\tmax_inclusive: { absolute: max2 },\n\t\t\t\t\tcutoff: min2,\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'range_very_biased':\n\t\t\tconst min3 = data.config.bottom_offset\n\t\t\tconst max3 = data.config.bottom_offset + data.config.maximum - data.config.top_offset - 1\n\t\t\tdata.type = 'minecraft:range'\n\t\t\tdata.config = {\n\t\t\t\theight: {\n\t\t\t\t\ttype: 'minecraft:very_biased_to_bottom',\n\t\t\t\t\tmin_inclusive: { absolute: min3 },\n\t\t\t\t\tmax_inclusive: { absolute: max3 },\n\t\t\t\t\tcutoff: min3,\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'depth_average':\n\t\t\tdata.type = 'minecraft:range'\n\t\t\tdata.config = {\n\t\t\t\theight: {\n\t\t\t\t\ttype: 'minecraft:trapezoid',\n\t\t\t\t\tmin_inclusive: { absolute: data.config.baseline },\n\t\t\t\t\tmax_inclusive: { absolute: data.config.baseline + data.config.spread },\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'emerald_ore':\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:count', config: { count: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tvalue: { min_inclusive: 3, max_inclusive: 8 },\n\t\t\t\t} } },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: 4 },\n\t\t\t\t\tmax_inclusive: { absolute: 31 },\n\t\t\t\t} } }\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'end_island':\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:chance', config: { chance: 14 } },\n\t\t\t\t{ type: 'minecraft:count_extra', config: {\n\t\t\t\t\tcount: 1,\n\t\t\t\t\textra_count: 1,\n\t\t\t\t\textra_chance: 0.25,\n\t\t\t\t} },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: 55 },\n\t\t\t\t\tmax_inclusive: { absolute: 70 },\n\t\t\t\t} } }\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'magma':\n\t\t\tctx.warn('Removed decorator \"magma\" previously used the sea level. Assumed sea level is 32 and replaced with a range decorator between 27 and 36.')\n\t\t\tdata.type = 'minecraft:range'\n\t\t\tdata.config = { height: {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tmin_inclusive: { absolute: 27 },\n\t\t\t\tmax_inclusive: { absolute: 36 },\n\t\t\t} }\n\t\t\tbreak\n\t}\n}\n\nfunction combinedDecorators(...decorators: any[]): any {\n\treturn {\n\t\touter: decorators[0],\n\t\tinner: decorators.length === 2 ? decorators[1] : {\n\t\t\ttype: 'minecraft:decorated',\n\t\t\tconfig: combinedDecorators(...decorators.slice(1)),\n\t\t},\n\t}\n}\n","import { Fix } from '../../Fix'\n\nconst replaceitemRegex = /replaceitem ((?:entity @[parse](\\[.*\\]*)?|block( [^ ]+){3}) [a-z0-9.]+) /\nconst timeObjectiveRegex = /scoreboard objectives add ([^ ]+) (minecraft.)?custom:(minecraft.)?play_one_minute/\n\n/**\n * Upgrades /replaceitem to /item replace ... with\n */\nexport const Function = Fix.onFile('functions', (data: string[]) => {\n\tdata.forEach((line, i) => {\n\t\tif (line.startsWith('replaceitem ') || line.startsWith('execute ')) {\n\t\t\tdata[i] = data[i].replace(replaceitemRegex, 'item replace $1 with ')\n\t\t}\n\t\tif (line.startsWith('scoreboard') || line.startsWith('execute')) {\n\t\t\tdata[i] = data[i].replace(timeObjectiveRegex, 'scoreboard objectives add $1 $2custom:$3play_time')\n\t\t}\n\t})\n})\n","import { Fix } from '../../Fix'\n\n/**\n * Renames grass_path to dirt_path\n */\nexport const Ids = Fix.all(\n\tFix.onFile('tags/blocks', fixTag),\n\tFix.onFile('tags/items', fixTag),\n)\n\nfunction fixTag(data: any) {\n\tdata.values?.forEach((_: any, i: number) => fixIds(data.values, i))\n}\n\nexport function fixIds(data: any, key: string | number) {\n\tconst id = data[key].replace(/^minecraft:/, '')\n\n\tif (id === 'grass_path') {\n\t\tdata[key] = 'minecraft:dirt_path'\n\t}\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Adds the \"min_y\" and \"height\" properties to dimension types\n */\nexport const NoiseSettings = Fix.all(\n\tFix.onFile('worldgen/noise_settings', fixNoiseSettings),\n\tFix.onFile('dimension', (data) => {\n\t\tif (data.generator?.type?.replace(/^minecraft:/, '') === 'noise') {\n\t\t\tfixNoiseSettings(data.generator.settings)\n\t\t}\n\t}),\n)\n\nfunction fixNoiseSettings(data: any) {\n\tif (typeof data !== 'object') return\n\n\tif (data.bedrock_roof_position <= -10) data.bedrock_roof_position = -2147483648\n\tif (data.bedrock_floor_position <= -10) data.bedrock_floor_position = -2147483648\n\n\tdata.min_surface_level = 0\n\tdata.noise_caves_enabled = false\n\tdata.noodle_caves_enabled = false\n\tdata.aquifers_enabled = false\n\tdata.deepslate_enabled = false\n\tdata.ore_veins_enabled = false\n\tdata.noise.min_y = 0\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Fixes item and block predicates all over predicates, advancements and loot tables\n */\nexport const Predicates = Fix.all(\n\tFix.onFile('predicates', (data) => {\n\t\tif (Array.isArray(data)) {\n\t\t\tdata.forEach(fixCondition)\n\t\t} else {\n\t\t\tfixCondition(data)\n\t\t}\n\t}),\n\tFix.onFile('advancements', (data) => {\n\t\tObject.values(data.criteria).forEach(fixCriterion)\n\t}),\n\tFix.onFile('loot_tables', (data) => {\n\t\tdata.pools?.forEach(fixPool)\n\t}),\n)\n\nfunction fixCriterion(data: any) {\n\tif (typeof data.conditions !== 'object') return\n\n\tfixEntity(data.conditions.entity)\n\tfixEntity(data.conditions.player)\n\tfixEntity(data.conditions.parent)\n\tfixEntity(data.conditions.partner)\n\tfixEntity(data.conditions.child)\n\tfixEntity(data.conditions.villager)\n\tfixEntity(data.conditions.zombie)\n\tfixEntity(data.conditions.projectile)\n\tfixEntity(data.conditions.shooter)\n\tdata.conditions.victims?.forEach(fixEntity)\n\n\tfixItem(data.conditions.item)\n\tdata.conditions.items?.forEach(fixItem)\n\n\tfixDamage(data.conditions.damage)\n\tfixDamage(data.conditions.killing_blow)\n\t\n\tfixLocation(data.conditions.location)\n\tfixLocation(data.conditions.entered)\n\tfixLocation(data.conditions.exited)\n}\n\nfunction fixPool(data: any) {\n\tdata.entries?.forEach(fixEntry)\n\tdata.conditions?.forEach(fixCondition)\n}\n\nfunction fixEntry(data: any) {\n\tdata.children?.forEach(fixEntry)\n\tdata.conditions?.forEach(fixCondition)\n}\n\nfunction fixCondition(data: any) {\n\tconst condition = data.condition.replace(/^minecraft:/, '')\n\tswitch (condition) {\n\t\tcase 'match_tool':\n\t\t\tfixItem(data.predicate)\n\t\t\tbreak\n\t\tcase 'entity_properties':\n\t\t\tfixEntity(data.predicate)\n\t\t\tbreak\n\t\tcase 'damage_source_properties':\n\t\t\tfixDamage(data.predicate)\n\t\t\tbreak\n\t\tcase 'location_check':\n\t\t\tfixLocation(data.predicate)\n\t\t\tbreak\n\t}\n}\n\nfunction fixDamage(data: any) {\n\tif (typeof data !== 'object') return\n\n\tfixEntity(data.source_entity)\n\tfixEntity(data.direct_entity)\n\tfixDamage(data.type)\n}\n\nfunction fixEntity(data: any) {\n\tif (typeof data !== 'object') return\n\n\tif (Array.isArray(data)) {\n\t\tdata.forEach(fixCondition)\n\t\treturn\n\t}\n\n\tif (data.equipment) {\n\t\tObject.values(data.equipment).forEach(fixItem)\n\t}\n\tfixEntity(data.vehicle)\n\tfixEntity(data.targeted_entity)\n\tfixLocation(data.location)\n}\n\nfunction fixLocation(data: any) {\n\tif (typeof data !== 'object') return\n\n\tfixBlock(data.block)\n}\n\nfunction fixItem(data: any) {\n\tif (typeof data !== 'object') return\n\n\tif (data.item) {\n\t\tdata.items = [data.item]\n\t\tdelete data.item\n\t}\n}\n\nfunction fixBlock(data: any) {\n\tif (typeof data !== 'object') return\n\n\tif (data.block) {\n\t\tdata.blocks = [data.block]\n\t\tdelete data.block\n\t}\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Adds the new config property to the nether_fossil structure feature\n */\nexport const StructureFeature = Fix.all(\n\tFix.onFile('worldgen/configured_structure_feature', fixStructureFeature),\n\tFix.onFile('worldgen/biome', (data) => {\n\t\tif (Array.isArray(data.starts)) {\n\t\t\tdata.starts.forEach(fixStructureFeature)\n\t\t}\n\t}),\n)\n\nfunction fixStructureFeature(data: any) {\n\tif (typeof data !== 'object') return\n\tconst type = data.type.replace(/^minecraft:/, '')\n\n\tif (type === 'nether_fossil') {\n\t\tif (!data.config) data.config = {}\n\t\tdata.config.height = {\n\t\t\ttype: 'minecraft:uniform',\n\t\t\tmin_inclusive: { absolute: 32 },\n\t\t\tmax_inclusive: { below_top: 2 },\n\t\t}\n\t}\n}\n","import { Fix } from '../../Fix'\nimport { Carver } from './Carver'\nimport { DimensionType } from './DimensionType'\nimport { Feature } from './Feature'\nimport { Function } from './Function'\nimport { Ids } from './Ids'\nimport { NoiseSettings } from './NoiseSettings'\nimport { PackFormat } from './PackFormat'\nimport { Predicates } from './Predicates'\nimport { StructureFeature } from './StructureFeature'\n\nexport const Fixes17 = Fix.all(\n\tFix.debug('1.17 fixes'),\n\tFix.assert((pack) => pack.meta.data.pack.pack_format !== 7, 'This pack already has pack_format 7 and cannot be upgraded.'),\n\tFix.when('ids', Ids),\n\tFix.when('predicates', Predicates),\n\tFix.when('functions', Function),\n\tFix.when('worldgen',\n\t\tDimensionType,\n\t\tNoiseSettings,\n\t\tStructureFeature,\n\t\tCarver,\n\t\tFeature\n\t),\n\tFix.when('packFormat', PackFormat),\n)\n","import type { Fix } from '../../Fix'\nimport type { Pack } from '../../Pack'\n\n/**\n * Sets the pack.mcmeta \"pack_format\" to 7\n */\nexport const PackFormat: Fix = (pack: Pack) => {\n\tpack.meta.data.pack.pack_format = 7\n}\n","import { Fix } from '../../Fix'\n\nexport const Fixes18 = Fix.all(\n\tFix.debug('1.18 fixes'),\n\tFix.assert((pack) => pack.meta.data.pack.pack_format !== 8, 'This pack already has pack_format 8 and cannot be upgraded.'),\n)\n","import { Fix } from '../Fix'\nimport { Fixes17 } from './1.17'\nimport { Fixes18 } from './1.18'\n\nexport const Fixes = Fix.all(\n\tFix.version('1.16.5', '1.17.1', Fixes17),\n\tFix.version('21w44a', '1.18-pre1', Fixes18)\n)\n","import detectIndent from 'detect-indent'\nimport JSZip from 'jszip'\nimport type { FixConfig } from './Fix'\nimport { Fixes } from './fixes'\nimport type { Version } from './Version'\n\nexport const categories = [\n\t'advancements',\n\t'dimension',\n\t'dimension_type',\n\t'loot_tables',\n\t'predicates',\n\t'tags/blocks',\n\t'tags/items',\n\t'worldgen/biome',\n\t'worldgen/configured_carver',\n\t'worldgen/configured_feature',\n\t'worldgen/configured_structure_feature',\n\t'worldgen/configured_surface_builder',\n\t'worldgen/noise_settings',\n\t'worldgen/processor_list',\n\t'worldgen/template_pool',\n] as const\n\ntype PackFile = {\n\tname: string,\n\tdata: any,\n\tindent?: string,\n}\n\nexport type Pack = {\n\tname: string,\n\tzip: JSZip,\n\tmeta: PackFile,\n\tdata: {\n\t\t[category: string]: PackFile[],\n\t},\n}\n\nexport namespace Pack {\n\texport async function fromZip(file: File): Promise<Pack> {\n\t\tconst buffer = await file.arrayBuffer()\n\t\tconst zip = await JSZip.loadAsync(buffer)\n\n\t\tconst pack: Pack = { name: file.name, zip, data: {} } as Pack\n\t\tawait Promise.all(categories.map(async category => {\n\t\t\tpack.data[category] = await loadCategory(zip, category)\n\t\t}))\n\t\tpack.data.functions = await loadFunctions(zip)\n\t\tpack.meta = { name: 'pack', ...await loadJson(zip, 'pack.mcmeta') }\n\t\tconsole.log(pack)\n\t\treturn pack\n\t}\n\n\tasync function loadCategory(zip: JSZip, category: string): Promise<PackFile[]> {\n\t\tconst matcher = new RegExp(`^data\\/([^\\/]+)\\/${category}\\/(.*)\\.json$`)\n\t\treturn Promise.all(Object.keys(zip.files)\n\t\t\t.map(f => f.match(matcher)).filter(m => m)\n\t\t\t.map(async m => ({\n\t\t\t\tname: `${m![1]}:${m![2]}`,\n\t\t\t\t...await loadJson(zip, m![0]),\n\t\t\t}))\n\t\t)\n\t}\n\n\tasync function loadJson(zip: JSZip, path: string) {\n\t\tlet text = await loadText(zip, path)\n\t\tconst indent = detectIndent(text).indent\n\t\ttry {\n\t\t\ttext = text.replaceAll('\\u200B', '').replaceAll('\\u200C', '').replaceAll('\\u200D', '').replaceAll('\\uFEFF', '')\n\t\t\ttext = text.split('\\n').map(l => l.replace(/^([^\"\\/]+)\\/\\/.*/, '$1')).join('\\n')\n\t\t\treturn { data: JSON.parse(text), indent }\n\t\t} catch (e: any) {\n\t\t\tthrow new Error(`Cannot parse \"${path}\": ${e.message}.`)\n\t\t}\n\t}\n\n\tasync function loadFunctions(zip: JSZip): Promise<PackFile[]> {\n\t\tconst matcher = /^data\\/([^\\/]+)\\/functions\\/(.*)\\.mcfunction$/\n\t\treturn Promise.all(Object.keys(zip.files)\n\t\t\t.map(f => f.match(matcher)).filter(m => m)\n\t\t\t.map(async m => ({\n\t\t\t\tname: `${m![1]}:${m![2]}`,\n\t\t\t\tdata: (await loadText(zip, m![0])).split('\\n'),\n\t\t\t}))\n\t\t)\n\t}\n\n\tasync function loadText(zip: JSZip, path: string) {\n\t\tconst file = zip.files[path]\n\t\tif (!file) {\n\t\t\tthrow new Error(`Cannot find \"${path}\".`)\n\t\t}\n\t\treturn await file.async('text')\n\t}\n\n\texport async function toZip(pack: Pack) {\n\t\tcategories.forEach(category => {\n\t\t\twriteCategory(pack.zip, category, pack.data[category])\n\t\t})\n\t\twriteFunctions(pack.zip, pack.data.functions)\n\t\twriteJson(pack.zip, 'pack.mcmeta', pack.meta.data, pack.meta.indent)\n\t\tconst blob = await pack.zip.generateAsync({ type: 'blob', compression: 'DEFLATE' })\n\t\treturn URL.createObjectURL(blob)\n\t}\n\n\tfunction writeCategory(zip: JSZip, category: string, data: PackFile[]) {\n\t\tdata.forEach(({ name, data, indent }) => {\n\t\t\tconst [namespace, path] = name.split(':')\n\t\t\twriteJson(zip, `data/${namespace}/${category}/${path}.json`, data, indent)\n\t\t})\n\t}\n\n\tfunction writeFunctions(zip: JSZip, functions: PackFile[]) {\n\t\tfunctions.forEach(({ name, data }) => {\n\t\t\tconst [namespace, path] = name.split(':')\n\t\t\twriteText(zip, `data/${namespace}/functions/${path}.mcfunction`, data.join('\\n'))\n\t\t})\n\t}\n\n\tfunction writeJson(zip: JSZip, path: string, data: any, indent?: string) {\n\t\tconst text = JSON.stringify(data, null, indent) + '\\n'\n\t\twriteText(zip, path, text)\n\t}\n\n\tfunction writeText(zip: JSZip, path: string, data: any) {\n\t\tzip.file(path, data)\n\t}\n\n\texport async function upgrade(pack: Pack, config: FixConfig, source: Version, target: Version) {\n\t\tconst warnings: string[] = []\n\t\tconst ctx = {\n\t\t\twarn: (message: string) => warnings.push(message),\n\t\t\tconfig: (key: keyof FixConfig) => config[key],\n\t\t\tsource: () => source,\n\t\t\ttarget: () => target,\n\t\t}\n\t\ttry {\n\t\t\tFixes(pack, ctx)\n\t\t} catch (e) {\n\t\t\tif (e instanceof Error) {\n\t\t\t\treturn { warnings: [e.message] }\n\t\t\t}\n\t\t}\n\t\treturn { warnings }\n\t}\n}\n","import { useEffect, useState } from 'preact/hooks'\nimport type { FixConfig } from '../Fix'\nimport { Pack } from '../Pack'\nimport type { Version } from '../Version'\nimport { Octicon } from './Octicon'\n\ntype PackCardProps = {\n\tpack: Pack,\n\tconfig: FixConfig,\n\tsource: Version,\n\ttarget: Version,\n\tonError: (error: Error) => unknown,\n}\nexport function PackCard({ pack, config, source, target, onError }: PackCardProps) {\n\tconst [status, setStatus] = useState('Loading...')\n\tconst [download, setDownload] = useState<string | null>(null)\n\tconst [alerts, setAlerts] = useState<string[]>([])\n\tconst [error, setError] = useState<string | null>(null)\n\tconst [alertsHidden, setAlertsHidden] = useState(false)\n\n\tconst downloadName = pack.name.replace(/\\.zip$/, '_1_17.zip')\n\tconst problems: Record<string, string[]> = {}\n\talerts.forEach(a => {\n\t\tif (a.match(/^[a-z0-9_-]+:[a-z0-9/_-]+ /)) {\n\t\t\tconst [file, ...name] = a.split(' ');\n\t\t\t(problems[name.join(' ')] ??= []).push(file)\n\t\t} else {\n\t\t\tproblems[a] = []\n\t\t}\n\t})\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tsetStatus('Upgrading...')\n\t\t\t\tconst { warnings } = await Pack.upgrade(pack, config, source, target)\n\t\t\t\tawait new Promise(res => setTimeout(res, 500))\n\t\t\t\tif (warnings) setAlerts(warnings)\n\n\t\t\t\tsetStatus('Zipping...')\n\t\t\t\tconst download = await Pack.toZip(pack)\n\t\t\t\tsetDownload(download)\n\t\t\t} catch (e: any) {\n\t\t\t\tonError(e)\n\t\t\t\tsetError('Error during upgrading')\n\t\t\t}\n\t\t})()\n\t}, [pack])\n\n\tconst toggleAlerts = () => {\n\t\tsetAlertsHidden(!alertsHidden)\n\t}\n\n\treturn <div class=\"pack\">\n\t\t<div class=\"pack-head\">\n\t\t\t{download && <a class=\"pack-status download\" href={download} download={downloadName} data-hover=\"Download data pack for 1.17\">\n\t\t\t\t{Octicon.download}\n\t\t\t</a>}\n\t\t\t{(!download && !error) && <div class=\"pack-status loading\" data-hover={status}>\n\t\t\t\t{Octicon.sync}\n\t\t\t</div>}\n\t\t\t{(alerts.length > 0 || error) && <div class={`pack-status alert${error ? ' error' : ''}`} onClick={toggleAlerts} data-hover={error ?? 'There were issues upgrading'}>\n\t\t\t\t{Octicon.alert}\n\t\t\t</div>}\n\t\t\t<span class=\"pack-name\">{pack.name.replace(/\\.zip$/, '')}</span>\n\t\t</div>\n\t\t{(alerts.length > 0 && !alertsHidden) && <div class=\"pack-body\">\n\t\t\t{Object.entries(problems).map(([name, files]) => <div class=\"pack-alert\">\n\t\t\t\t<div class=\"alert-name\">{name}</div>\n\t\t\t\t{files.length > 0 && <>\n\t\t\t\t\t<p>Affected files:</p>\n\t\t\t\t\t<div class=\"alert-files\">{files.map(file => <p>{file}</p>)}</div>\n\t\t\t\t</>}\n\t\t\t</div>)}\n\t\t</div>}\n\t</div>\n}\n","import { useRef } from 'preact/hooks'\nimport type { Version } from '../Version'\nimport { Versions } from '../Version'\n\ntype VersionPickerProps = {\n\tvalue: Version,\n\tonChange: (version: Version) => unknown,\n}\nexport function VersionPicker({ value, onChange }: VersionPickerProps) {\n\tconst select = useRef<HTMLSelectElement>(null)\n\tconst change = () => {\n\t\tonChange(select.current.value as Version)\n\t}\n\treturn <select class=\"version-picker\" ref={select} value={value} onChange={change}>\n\t\t{Versions.map(v => <option value={v}>{v}</option>)}\n\t</select>\n}\n","import { useState } from 'preact/hooks'\nimport { Config } from './components/Config'\nimport { Octicon } from './components/Octicon'\nimport { PackCard } from './components/PackCard'\nimport { VersionPicker } from './components/VersionPicker'\nimport type { FixConfig } from './Fix'\nimport { Pack } from './Pack'\nimport { Version } from './Version'\n\nexport type AppError = {\n\tprocess: 'loading' | 'upgrading',\n\terror: Error,\n}\n\nexport function App() {\n\tconst [packs, setPacks] = useState<Pack[]>([])\n\tconst [errors, setErrors] = useState<AppError[]>([])\n\tconst [source, setSource] = useState<Version>('1.16.5')\n\tconst [target, setTarget] = useState<Version>('1.17.1')\n\tconst [config, setConfig] = useState<FixConfig>({\n\t\tfunctions: true,\n\t\tids: true,\n\t\tpredicates: true,\n\t\tworldgen: true,\n\t\tpackFormat: true,\n\t})\n\n\tconst onDrop = async (e: DragEvent) => {\n\t\te.preventDefault()\n\t\tif(!e.dataTransfer) return\n\n\t\tconst promises = []\n\t\tfor (let i = 0; i < e.dataTransfer.files.length; i++) {\n\t\t\tconst file = e.dataTransfer.files[i]\n\t\t\tif (file.type.match(/^application\\/(x-)?zip(-compressed)?$/)) {\n\t\t\t\tpromises.push(Pack.fromZip(file))\n\t\t\t}\n\t\t}\n\t\tif (promises.length === 0) {\n\t\t\tsetErrors([...errors, {\n\t\t\t\tprocess: 'loading',\n\t\t\t\terror: new Error('The dropped files contain no zip files. Please zip the data pack first.'),\n\t\t\t}])\n\t\t} else {\n\t\t\tconst newPacks = await Promise.all(promises.map(async promise => {\n\t\t\t\ttry {\n\t\t\t\t\treturn await promise\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tsetErrors([...errors, { process: 'loading', error }])\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}))\n\t\t\tsetPacks([...packs, ...newPacks.filter((p): p is Pack => p !== undefined)])\n\t\t}\n\t}\n\n\tconst onUpgradeError = (error: Error) => {\n\t\tconsole.error(error)\n\t\tsetErrors([...errors, { process: 'upgrading', error }])\n\t}\n\n\treturn <main onDrop={onDrop} onDragOver={e => e.preventDefault()}>\n\t\t{packs.length > 0 && <>\n\t\t\t<div class=\"packs\">\n\t\t\t\t{packs.map(pack => <PackCard {...{pack, config, source, target}} onError={onUpgradeError} />)}\n\t\t\t</div>\n\t\t</>}\n\t\t<div class=\"drop\">\n\t\t\t<h1>Drop data pack here</h1>\n\t\t\t<p>Convert from <VersionPicker value={source} onChange={setSource}/> to <VersionPicker value={target} onChange={setTarget}/></p>\n\t\t\t{!Version.order(source, target)\n\t\t\t\t? <p class=\"error-message\">Invalid versions</p>\n\t\t\t\t: Version.intersects(source, target, '1.17.1', '1.18-pre1')\n\t\t\t\t\t? <p class=\"error-message\">This upgrade is still being worked on...</p>\n\t\t\t\t\t: null}\n\t\t</div>\n\t\t<div class=\"configs\">\n\t\t\t<Config name=\"Upgrade functions\" value={config.functions} onChange={v => setConfig({ ...config, functions: v })} />\n\t\t\t<Config name=\"Upgrade IDs\" value={config.ids} onChange={v => setConfig({ ...config, ids: v })} />\n\t\t\t<Config name=\"Upgrade predicates\" value={config.predicates} onChange={v => setConfig({ ...config, predicates: v })} />\n\t\t\t<Config name=\"Upgrade worldgen\" value={config.worldgen} onChange={v => setConfig({ ...config, worldgen: v })} />\n\t\t\t<Config name=\"Upgrade pack_format\" value={config.packFormat} onChange={v => setConfig({ ...config, packFormat: v })} />\n\t\t</div>\n\t\t<div class=\"footer\">\n\t\t\t<p>Developed by Misode</p>\n\t\t\t<p>Source code on <a href=\"https://github.com/misode/upgrader\" target=\"_blank\">GitHub</a></p>\n\t\t</div>\n\t\t<div class=\"main-errors\">\n\t\t\t{errors.map(e => {\n\t\t\t\tconst title = `${e.error.name}: ${e.error.message}`\n\t\t\t\tconst body = `An error occurred while ${e.process} a data pack.\\nData Pack: <!-- ATTACH YOUR DATAPACK HERE -->\\n\\n\\`\\`\\`\\n${e.error.stack}\\n\\`\\`\\`\\n`\n\t\t\t\tconst url = `https://github.com/misode/upgrader/issues/new?title=${encodeURIComponent(title)}&body=${encodeURIComponent(body)}\\n`\n\t\t\t\treturn <div class=\"main-error\">\n\t\t\t\t\t<p>Something went wrong {e.process} the data pack:</p>\n\t\t\t\t\t<p class=\"error-message\">{e.error.message}</p>\n\t\t\t\t\t<p>You can report this as a bug <a href={url} target=\"_blank\">on GitHub</a> and upload the data pack</p>\n\t\t\t\t\t<div class=\"error-close\" onClick={() => setErrors(errors.filter(f => f.error.message !== e.error.message || f.process !== e.process))}>{Octicon.x}</div>\n\t\t\t\t</div>})}\n\t\t</div>\n\t</main>\n}\n","import { render } from 'preact'\nimport { App } from './App'\nimport './style.css'\n\nrender(<App/>, document.body)\n"],"names":["class","type","checked","value","onChange","e","target","name","alert","xmlns","viewBox","width","height","fill-rule","d","download","sync","x","Versions","Version","Fix","Fix2","Version2","version","indexOf","ord","order","before","after","intersects","source","from","to","all","fixes","pack","ctx","forEach","fix","onFile","category","data","fileCtx","__spreadProps","warn","message","error","Error","replace","replaceAll","stack","when","key","config","assert","predicate","log","meta","debug","Carver","fixCarver","carvers","air","liquid","lava_level","above_bottom","aquifers_enabled","y","min_inclusive","absolute","max_inclusive","below_top","inner","yScale","horizontal_radius_multiplier","vertical_radius_multiplier","floor_level","vertical_rotation","max_exclusive","shape","distance_factor","thickness","min","max","plateau","width_smoothness","horizontal_radius_factor","vertical_radius_default_factor","vertical_radius_center_factor","DimensionType","fixDimensionType","min_y","Feature","fixFeature","Array","isArray","starts","decorator","feature","targets","predicate_type","block_state","state","placer","block_placer","size","min_size","extra_size","max_empty_corners_allowed","fossil_processors","overlay_processors","fossil_structures","overlay_structures","r","radius","base","spread","Math","discard_chance_on_air_exposure","feature_false","feature_true","features","default","to_place","fixUniformInt","foliage_placer","k","foliage_provider","leaves_provider","force_dirt","dirt_provider","Name","sapling_provider","getSapling","Properties","stage","combinedDecorators","max_water_depth","heightmap","foliage","match","probability","chance","step","Number","isInteger","count","extra_count","extra_chance","c","min0","max0","outer","chance2","ceil","count2","bottom_offset","maximum","top_offset","min2","max2","cutoff","min3","max3","baseline","decorators","length","slice","replaceitemRegex","timeObjectiveRegex","Function","line","i","startsWith","Ids","fixTag","values","_","fixIds","NoiseSettings","fixNoiseSettings","generator","settings","bedrock_roof_position","bedrock_floor_position","min_surface_level","noise_caves_enabled","noodle_caves_enabled","deepslate_enabled","ore_veins_enabled","noise","Predicates","fixCondition","criteria","fixCriterion","pools","fixPool","conditions","entity","player","parent","partner","child","villager","zombie","projectile","shooter","victims","fixEntity","item","items","fixItem","damage","killing_blow","location","entered","exited","entries","fixEntry","children","condition","source_entity","direct_entity","equipment","vehicle","targeted_entity","block","blocks","StructureFeature","fixStructureFeature","Fixes17","pack_format","Fixes18","Fixes","categories","Pack","onError","status","setStatus","useState","setDownload","alerts","setAlerts","setError","alertsHidden","setAlertsHidden","downloadName","problems","a2","file","split","join","push","warnings","upgrade","Promise","setTimeout","res","download2","toZip","href","data-hover","Octicon","onClick","Object","map","files","select","useRef","ref","current","v","packs","setPacks","errors","setErrors","setSource","setTarget","setConfig","functions","ids","predicates","worldgen","packFormat","onUpgradeError","process","onDrop","async","preventDefault","dataTransfer","promises","fromZip","newPacks","promise","filter","p","onDragOver","PackCard","VersionPicker","Config","title","body","url","encodeURIComponent","f","Pack2","zip","path","text","loadText","indent","detectIndent","l2","JSON","parse","stringify","buffer","arrayBuffer","JSZip","loadAsync","matcher","RegExp","keys","m","loadJson","loadCategory","loadFunctions","__spreadValues","namespace","data2","blob","generateAsync","compression","URL","createObjectURL","render","App","document"],"mappings":"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"}