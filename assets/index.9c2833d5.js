var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(a,t,n)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,c=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&o(e,t,a[t]);if(n)for(var t of n(a))i.call(a,t)&&o(e,t,a[t]);return e},s=(e,n)=>a(e,t(n));import{a as l,J as f,d as u,s as p,l as m,y as _,b as d,c as g,N as h}from"./vendor.d01f8cea.js";function b({name:e,value:a,onChange:t}){return l("label",{class:"config"},l("input",{type:"checkbox",checked:a,onChange:e=>t(e.target.checked)}),e)}const v={alert:l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16"},l("path",{"fill-rule":"evenodd",d:"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"})),download:l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16"},l("path",{"fill-rule":"evenodd",d:"M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z"})),sync:l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16"},l("path",{"fill-rule":"evenodd",d:"M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"})),x:l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16"},l("path",{"fill-rule":"evenodd",d:"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"}))},y=["1.16.5","1.17.1","21w44a","1.18-pre1"];var w,k,x;!function(e){function a(e){return y.indexOf(e)}e.ord=a,e.order=function(e,t){return a(e)<a(t)},e.includes=function(e,t,n,r){return a(e)<a(r)&&a(t)>a(n)}}(w||(w={})),(x=k||(k={})).all=function(...e){return(a,t)=>{e.forEach((e=>e(a,t)))}},x.onFile=function(e,a){return(t,n)=>{for(const i of t.data[e]){const t=s(c({},n),{warn:e=>n.warn(`${i.name} ${e}`)});try{a(i,t)}catch(r){const a=new Error(`Error fixing ${e.replace(/^worldgen\//,"").replaceAll("_"," ")} ${i.name}: ${r.message}`);throw a.stack=r.stack,console.warn(a),a}}}},x.when=function(e,...a){return(t,n)=>{n.config(e)&&a.forEach((e=>e(t,n)))}},x.assert=function(e,a){return(t,n)=>{if(!e(t,n))throw new Error(a)}},x.version=function(e,a,...t){return(n,r)=>{w.includes(r.source(),r.target(),e,a)&&t.forEach((e=>e(n,r)))}},x.debug=function(e){return()=>{console.debug(e)}};const E=k.all(k.onFile("worldgen/configured_carver",(({data:e})=>j(e))),k.onFile("worldgen/biome",(({data:e})=>{var a,t;"object"==typeof e.carvers&&(null==(a=e.carvers.air)||a.forEach(j),null==(t=e.carvers.liquid)||t.forEach(j))})));function j(e){if("object"!=typeof e)return;const a=e.type.replace(/^minecraft:/,"");e.config.lava_level={above_bottom:10},e.config.aquifers_enabled=!1,"cave"===a||"underwater_cave"===a||"nether_cave"===a?(e.config.y="nether_cave"===a?{type:"minecraft:uniform",min_inclusive:{absolute:0},max_inclusive:{below_top:1}}:{type:"minecraft:biased_to_bottom",min_inclusive:{absolute:0},max_inclusive:{absolute:127},inner:8},e.config.yScale=.5,e.config.horizontal_radius_multiplier=1,e.config.vertical_radius_multiplier=1,e.config.floor_level=-.7):(e.config.y={type:"minecraft:biased_to_bottom",min_inclusive:{absolute:20},max_inclusive:{absolute:67},inner:8},e.config.yScale=3,e.config.vertical_rotation={type:"minecraft:uniform",value:{min_inclusive:-.125,max_exclusive:.125}},e.config.shape={distance_factor:{type:"minecraft:uniform",value:{min_inclusive:.75,max_exclusive:1}},thickness:{type:"minecraft:trapezoid",value:{min:0,max:6,plateau:2}},width_smoothness:3,horizontal_radius_factor:{type:"minecraft:uniform",value:{min_inclusive:.75,max_exclusive:1}},vertical_radius_default_factor:1,vertical_radius_center_factor:0})}const z=k.all(k.onFile("dimension_type",(({data:e})=>$(e))),k.onFile("dimension",(({data:e})=>{"object"==typeof e.type&&$(e.type)})));function $(e){e.min_y=0,e.height=256}const A=k.all(k.onFile("worldgen/configured_feature",(({data:e},a)=>F(e,a))),k.onFile("worldgen/biome",(({data:e})=>{Array.isArray(e.starts)&&e.starts.forEach(F)})));function F(e,a){if("object"!=typeof e)return;switch(e.type.replace(/^minecraft:/,"")){case"basalt_columns":O(e.config,"reach"),O(e.config,"height");break;case"decorated":q(e.config.decorator,a),F(e.config.feature,a);break;case"delta_feature":O(e.config,"size"),O(e.config,"rim_size");break;case"disk":case"ice_patch":O(e.config,"radius");break;case"emerald_ore":e.type="minecraft:replace_single_block",e.config={targets:[{target:{predicate_type:"minecraft:blockstate_match",block_state:e.config.target},state:e.config.state}]};break;case"flower":case"no_bonemeal_flower":case"random_patch":const t=e.config.block_placer;"column_placer"===t.type.replace(/^minecraft:/,"")&&(t.size={type:"minecraft:uniform",value:{min_inclusive:t.min_size,max_inclusive:t.min_size+t.extra_size}},delete t.min_size,delete t.extra_size);break;case"fossil":e.config={max_empty_corners_allowed:4,fossil_processors:"minecraft:fossil_rot",overlay_processors:"minecraft:fossil_coal",fossil_structures:["minecraft:fossil/spine_1","minecraft:fossil/spine_2","minecraft:fossil/spine_3","minecraft:fossil/spine_4","minecraft:fossil/skull_1","minecraft:fossil/skull_2","minecraft:fossil/skull_3","minecraft:fossil/skull_4"],overlay_structures:["minecraft:fossil/spine_1_coal","minecraft:fossil/spine_2_coal","minecraft:fossil/spine_3_coal","minecraft:fossil/spine_4_coal","minecraft:fossil/skull_1_coal","minecraft:fossil/skull_2_coal","minecraft:fossil/skull_3_coal","minecraft:fossil/skull_4_coal"]};break;case"netherrack_replace_blobs":const n=e.config.radius;let r="number"==typeof n?n:n.base,i="number"==typeof n?n:n.base+n.spread;if(i>12&&(a.warn('Feature "netherrack_replace_blobs" no longer allows values above 12. Consider increasing the count of this feature.'),r=Math.min(12,r),i=Math.min(12,i)),r===i){e.config.radius=r;break}e.config.radius={type:"minecraft:uniform",value:{min_inclusive:r,max_inclusive:i}};break;case"no_surface_ore":C(e),e.type="minecraft:ore",e.config.discard_chance_on_air_exposure=1;break;case"ore":C(e);break;case"random_boolean_selector":F(e.config.feature_false,a),F(e.config.feature_true,a);break;case"random_selector":e.config.features.forEach((e=>F(e.feature,a))),F(e.config.default,a);break;case"sea_pickle":O(e.config,"count");break;case"simple_block":e.config.to_place={type:"minecraft:simple_state_provider",state:e.config.to_place};break;case"simple_random_selector":e.config.features.forEach((e=>F(e,a)));break;case"tree":["radius","offset","crown_height","height","trunk_height"].forEach((a=>O(e.config.foliage_placer,a))),e.config.foliage_provider=e.config.leaves_provider,delete e.config.leaves_provider,e.config.force_dirt=!1,e.config.dirt_provider={type:"minecraft:simple_state_provider",state:{Name:"minecraft:dirt"}},e.config.sapling_provider={type:"minecraft:simple_state_provider",state:{Name:M(e.config.foliage_provider),Properties:{stage:"0"}}},e.type="minecraft:decorated",e.config={decorator:{type:"decorated",config:L({type:"minecraft:water_depth_threshold",config:{max_water_depth:e.config.max_water_depth}},{type:"minecraft:heightmap",config:{heightmap:e.config.heightmap}})},feature:{type:"minecraft:tree",config:e.config}},delete e.config.feature.config.max_water_depth,delete e.config.feature.config.heightmap}}function O(e,a){"object"==typeof(null==e?void 0:e[a])&&(e[a]={type:"minecraft:uniform",value:{min_inclusive:e[a].base,max_inclusive:e[a].base+e[a].spread}})}function C(e){e.config.discard_chance_on_air_exposure=0,e.config.targets=[{target:e.config.target,state:e.config.state}],delete e.config.target,delete e.config.state}function M(e){if("simple_state_provider"===e.type.replace(/^minecraft:/,"")){const a=e.state.Name.match(/^(?:minecraft:)?([a-z_]+)_leaves/);if(a)return`minecraft:${a[1]}_sapling`}return"minecraft:oak_sapling"}function q(e,a){if("object"!=typeof e)return;const t=e.type.replace(/^minecraft:/,"");switch(t){case"carving_mask":if(0===e.config.probability){e.type="minecraft:nope",e.config={};break}const n=1/e.config.probability;e.type="minecraft:decorated",e.config=L({type:"minecraft:carving_mask",config:{step:e.config.step}},...Number.isInteger(n)?[{type:"minecraft:chance",config:{chance:n}}]:[{type:"minecraft:count_extra",config:{count:0,extra_count:1,extra_chance:e.config.probability}}]),delete e.config.probability;break;case"count":case"count_multilayer":const r=e.config.count;let i="number"==typeof r?r:r.base,o="number"==typeof r?r:r.base+r.spread;if(i<0&&(a.warn(`Decorator "${t}" no longer allows negative values.`),i=Math.max(0,i),o=Math.max(0,o)),i===o){e.config.count=i;break}e.config.count={type:"minecraft:uniform",value:{min_inclusive:i,max_inclusive:o}};break;case"decorated":q(e.config.outer,a),q(e.config.inner,a);break;case"heightmap_world_surface":e.type="minecraft:heightmap",e.config={heightmap:"WORLD_SURFACE_WG"};break;case"top_solid_heightmap":e.type="minecraft:heightmap",e.config={heightmap:"OCEAN_FLOOR_WG"};break;case"heightmap":case"heightmap_spread_double":e.config={heightmap:"MOTION_BLOCKING"};break;case"water_lake":e.type="minecraft:decorated",e.config=L({type:"minecraft:chance",config:{chance:e.config.chance}},{type:"minecraft:square",config:{}},{type:"minecraft:range",config:{height:{type:"minecraft:biased_to_bottom",min_inclusive:{absolute:0},max_inclusive:{absolute:256},inner:8}}});break;case"lava_lake":const c=e.config.chance/10;e.type="minecraft:decorated",e.config=L(...Number.isInteger(c)?[{type:"minecraft:chance",config:{chance:c}}]:[{type:"minecraft:count_extra",config:{count:0,extra_count:1,extra_chance:1/c}}],{type:"minecraft:square",config:{}},{type:"minecraft:range",config:{height:{type:"minecraft:biased_to_bottom",min_inclusive:{absolute:0},max_inclusive:{absolute:256},inner:8}}},{type:"minecraft:lava_lake",config:{chance:10}});break;case"fire":const s="number"==typeof e.config.count?e.config.count:e.config.count.base+e.config.count.spread/2;e.type="minecraft:decorated",e.config=L({type:"minecraft:count",config:{count:{type:"minecraft:biased_to_bottom",value:{min_inclusive:0,max_inclusive:Math.ceil(s/2)}}}},{type:"minecraft:square",config:{}},{type:"minecraft:range",config:{height:{type:"minecraft:uniform",min_inclusive:{absolute:4},max_inclusive:{absolute:252}}}});break;case"glowstone":const l="number"==typeof e.config.count?e.config.count:e.config.count.base+e.config.count.spread/2;e.type="minecraft:decorated",e.config=L({type:"minecraft:count",config:{count:{type:"minecraft:biased_to_bottom",value:{min_inclusive:0,max_inclusive:Math.ceil(l-1)}}}},{type:"minecraft:square",config:{}},{type:"minecraft:range",config:{height:{type:"minecraft:uniform",min_inclusive:{absolute:4},max_inclusive:{absolute:252}}}});break;case"range":const f=e.config.bottom_offset,u=e.config.bottom_offset+e.config.maximum-e.config.top_offset-1;if(f===u){e.config={height:{absolute:f}};break}e.config={height:{type:"minecraft:uniform",min_inclusive:{absolute:f},max_inclusive:{absolute:u}}};break;case"range_biased":const p=e.config.bottom_offset,m=e.config.bottom_offset+e.config.maximum-e.config.top_offset-1;e.type="minecraft:range",e.config={height:{type:"minecraft:biased_to_bottom",min_inclusive:{absolute:p},max_inclusive:{absolute:m},cutoff:p}};break;case"range_very_biased":const _=e.config.bottom_offset,d=e.config.bottom_offset+e.config.maximum-e.config.top_offset-1;e.type="minecraft:range",e.config={height:{type:"minecraft:very_biased_to_bottom",min_inclusive:{absolute:_},max_inclusive:{absolute:d},cutoff:_}};break;case"depth_average":e.type="minecraft:range",e.config={height:{type:"minecraft:trapezoid",min_inclusive:{absolute:e.config.baseline},max_inclusive:{absolute:e.config.baseline+e.config.spread}}};break;case"emerald_ore":e.type="minecraft:decorated",e.config=L({type:"minecraft:count",config:{count:{type:"minecraft:uniform",value:{min_inclusive:3,max_inclusive:8}}}},{type:"minecraft:square",config:{}},{type:"minecraft:range",config:{height:{type:"minecraft:uniform",min_inclusive:{absolute:4},max_inclusive:{absolute:31}}}});break;case"end_island":e.type="minecraft:decorated",e.config=L({type:"minecraft:chance",config:{chance:14}},{type:"minecraft:count_extra",config:{count:1,extra_count:1,extra_chance:.25}},{type:"minecraft:square",config:{}},{type:"minecraft:range",config:{height:{type:"minecraft:uniform",min_inclusive:{absolute:55},max_inclusive:{absolute:70}}}});break;case"magma":a.warn('Removed decorator "magma" previously used the sea level. Assumed sea level is 32 and replaced with a range decorator between 27 and 36.'),e.type="minecraft:range",e.config={height:{type:"minecraft:uniform",min_inclusive:{absolute:27},max_inclusive:{absolute:36}}}}}function L(...e){return{outer:e[0],inner:2===e.length?e[1]:{type:"minecraft:decorated",config:L(...e.slice(1))}}}const D=/replaceitem ((?:entity @[parse](\[.*\]*)?|block( [^ ]+){3}) [a-z0-9.]+) /,P=/scoreboard objectives add ([^ ]+) (minecraft.)?custom:(minecraft.)?play_one_minute/,T=k.onFile("functions",(({data:e})=>{e.forEach(((a,t)=>{(a.startsWith("replaceitem ")||a.startsWith("execute "))&&(e[t]=e[t].replace(D,"item replace $1 with ")),(a.startsWith("scoreboard")||a.startsWith("execute"))&&(e[t]=e[t].replace(P,"scoreboard objectives add $1 $2custom:$3play_time"))}))})),N=k.all(k.onFile("tags/blocks",(({data:e})=>U(e))),k.onFile("tags/items",(({data:e})=>U(e))));function U(e){var a;null==(a=e.values)||a.forEach(((a,t)=>function(e,a){"grass_path"===e[a].replace(/^minecraft:/,"")&&(e[a]="minecraft:dirt_path")}(e.values,t)))}const R=k.all(k.onFile("worldgen/noise_settings",(({data:e})=>S(e))),k.onFile("dimension",(({data:e})=>{var a,t;"noise"===(null==(t=null==(a=e.generator)?void 0:a.type)?void 0:t.replace(/^minecraft:/,""))&&S(e.generator.settings)})));function S(e){"object"==typeof e&&(e.bedrock_roof_position<=-10&&(e.bedrock_roof_position=-2147483648),e.bedrock_floor_position<=-10&&(e.bedrock_floor_position=-2147483648),e.min_surface_level=0,e.noise_caves_enabled=!1,e.noodle_caves_enabled=!1,e.aquifers_enabled=!1,e.deepslate_enabled=!1,e.ore_veins_enabled=!1,e.noise.min_y=0)}const I=k.all(k.onFile("predicates",(({data:e})=>{Array.isArray(e)?e.forEach(G):G(e)})),k.onFile("advancements",(({data:e})=>{Object.values(e.criteria).forEach(W)})),k.onFile("loot_tables",(({data:e})=>{var a;null==(a=e.pools)||a.forEach(B)})));function W(e){var a,t;"object"==typeof e.conditions&&(J(e.conditions.entity),J(e.conditions.player),J(e.conditions.parent),J(e.conditions.partner),J(e.conditions.child),J(e.conditions.villager),J(e.conditions.zombie),J(e.conditions.projectile),J(e.conditions.shooter),null==(a=e.conditions.victims)||a.forEach(J),V(e.conditions.item),null==(t=e.conditions.items)||t.forEach(V),Z(e.conditions.damage),Z(e.conditions.killing_blow),K(e.conditions.location),K(e.conditions.entered),K(e.conditions.exited))}function B(e){var a,t;null==(a=e.entries)||a.forEach(H),null==(t=e.conditions)||t.forEach(G)}function H(e){var a,t;null==(a=e.children)||a.forEach(H),null==(t=e.conditions)||t.forEach(G)}function G(e){switch(e.condition.replace(/^minecraft:/,"")){case"match_tool":V(e.predicate);break;case"entity_properties":J(e.predicate);break;case"damage_source_properties":Z(e.predicate);break;case"location_check":K(e.predicate)}}function Z(e){"object"==typeof e&&(J(e.source_entity),J(e.direct_entity),Z(e.type))}function J(e){"object"==typeof e&&(Array.isArray(e)?e.forEach(G):(e.equipment&&Object.values(e.equipment).forEach(V),J(e.vehicle),J(e.targeted_entity),K(e.location)))}function K(e){"object"==typeof e&&function(e){if("object"!=typeof e)return;e.block&&(e.blocks=[e.block],delete e.block)}(e.block)}function V(e){"object"==typeof e&&e.item&&(e.items=[e.item],delete e.item)}const Y=k.all(k.onFile("worldgen/configured_structure_feature",(({data:e})=>Q(e))),k.onFile("worldgen/biome",(({data:e})=>{Array.isArray(e.starts)&&e.starts.forEach(Q)})));function Q(e){if("object"!=typeof e)return;"nether_fossil"===e.type.replace(/^minecraft:/,"")&&(e.config||(e.config={}),e.config.height={type:"minecraft:uniform",min_inclusive:{absolute:32},max_inclusive:{below_top:2}})}const X=k.all(k.debug("1.17 fixes"),k.assert((e=>e.meta.data.pack.pack_format<7),"This pack already has pack_format 7 or higher and cannot be upgraded."),k.when("ids",N),k.when("predicates",I),k.when("functions",T),k.when("worldgen",z,R,Y,E,A),k.when("packFormat",(e=>{e.meta.data.pack.pack_format=7}))),ee=k.all(k.onFile("worldgen/configured_feature",(function(e,a){if("object"!=typeof e.data)return;const t=ae(e.data,a);"string"==typeof t.feature?e.data={type:"minecraft:random_selector",config:{features:[],default:t.feature}}:e.data={type:null==t?void 0:t.feature.type,config:null==t?void 0:t.feature.config};a.create("worldgen/placed_feature",e.name,{feature:"string"==typeof t.feature?t.feature:e.name,placement:null==t?void 0:t.placement})})),k.onFile("worldgen/biome",(({data:e},a)=>{Array.isArray(e.features)&&(e.features=e.features.map((e=>Array.isArray(e)?e.flatMap((e=>{if("string"!=typeof e)return e;const t=function(e,a){const t=e.replace(/^minecraft:/,"");return"meadow_trees"===t?["minecraft:trees_meadow"]:"lake_lava"===t?["minecraft:lake_lava_surface","minecraft:lake_lava_underground"]:ce.has(t)&&void 0===a.read("worldgen/placed_feature",t)?[]:[e]}(e,a);return t.forEach((e=>{const t=a.read("worldgen/placed_feature",e);t&&(t.data.placement.find((e=>"minecraft:biome"===e.type))||t.data.placement.push({type:"minecraft:biome"}))})),t})):e)))})));function ae(e,a){var t;if("object"!=typeof e)return{feature:e,placement:[]};const n=[];switch(e.type.replace(/^minecraft:/,"")){case"decorated":e=null==(t=ae(ie(e,n,a),a))?void 0:t.feature;break;case"lake":e.config={fluid:{type:"minecraft:simple_state_provider",state:e.config.state},barrier:{type:"minecraft:simple_state_provider",state:{Name:"minecraft:stone"}}};break;case"nether_forest_vegetation":e.config.spread_width=8,e.config.spread_height=4;break;case"random_boolean_selector":e.config.feature_false=te(ae(e.config.feature_false,a)),e.config.feature_true=te(ae(e.config.feature_true,a));break;case"root_system":case"random_patch":case"flower":case"no_bonemeal_flower":e.config.feature=ne(ae(e.config.feature,a));break;case"random_selector":e.config.features.forEach((e=>{e.feature=ne(ae(e.feature,a))})),e.config.default=ne(ae(e.config.default,a));break;case"simple_random_selector":e.config.features=e.config.features.map((e=>ne(ae(e,a))));break;case"twisting_vines":e.config={spread_width:8,spread_height:4,max_height:8};break;case"vegetation_patch":case"waterlogged_vegetation_patch":e.config.vegetation_feature=te(ae(e.config.vegetation_feature,a))}return{feature:e,placement:n}}function te(e){return e.placement.length>0?e.feature:{type:"minecraft:random_selector",config:{features:[],default:e}}}function ne(e){return"string"==typeof e.feature&&0===e.placement.length?e.feature:e}function re(e,a){if("object"!=typeof e)return[];const t=e.type.replace(/^minecraft:/,"");switch(t){case"block_filter":return[c({type:"minecraft:block_predicate_filter"},e.config)];case"cave_surface":const n=e.config.floor_to_ceiling_search_range;n>32&&a.warn('Converting cave_surface decorator into environment_scan: "max_steps" is limited to 32.');const r={direction_of_search:"ceiling"===e.config.surface?"up":"down",target_condition:{type:"minecraft:solid"},allowed_search_condition:{type:"minecraft:matching_blocks",blocks:["minecraft:air",...e.config.allow_water?["minecraft:water"]:[]]},max_steps:Math.min(32,n)};return[c({type:"minecraft:environment_scan"},r)];case"count_multilayer":return[c({type:"minecraft:count_on_every_layer"},e.config)];case"chance":return[c({type:"minecraft:rarity_filter"},e.config)];case"count_extra":let i=e.config.count+e.config.extra_count;if(i>256){let a=[i];for(i-=1;a.some((e=>e>256));)i+=1,a=oe(i);for(let e=2;e<=5;e+=1){const t=[];for(let n=0;n<e;n+=1)t.push(a.filter(((a,t)=>t%e===n)).reduce(((e,a)=>e*a)));if(t.every((e=>e<=256)))return t.map((e=>({type:"minecraft:count",count:e})))}throw new Error(`Extremely high count: ${e.config.count+e.config.extra_count}`)}return[{type:"minecraft:count",count:{type:"minecraft:weighted_list",distribution:[{weight:Math.round(100*(1-e.config.extra_chance)),data:Math.min(256,e.config.count)},{weight:Math.round(100*e.config.extra_chance),data:Math.min(256,i)}]}}];case"count_noise":return[c({type:"minecraft:noise_threshold_count"},e.config)];case"count_noise_biased":return[c({type:"minecraft:noise_based_count"},e.config)];case"dark_oak_tree":return[{type:"minecraft:count",count:16},{type:"minecraft:in_square"}];case"decorated":return[...re(e.config.outer,a),...re(e.config.inner,a)];case"end_gateway":return[{type:"minecraft:random_offset",xz_spread:0,y_spread:{type:"minecraft:uniform",value:{min_inclusive:3,max_inclusive:9}}}];case"iceberg":return[{type:"minecraft:in_square"}];case"lava_lake":return[{type:"minecraft:rarity_filter",chance:10}];case"nope":return[];case"range":return[c({type:"minecraft:height_range"},e.config)];case"scatter":return[c({type:"minecraft:random_offset"},e.config)];case"square":return[c({type:"minecraft:in_square"},e.config)];case"surface_relative_threshold":return[c({type:"minecraft:surface_relative_threshold_filter"},e.config)];case"water_depth_threshold":return[c({type:"minecraft:surface_water_depth_filter"},e.config)];default:return[c({type:t},e.config)]}}function ie(e,a,t){if("object"!=typeof e)return e;return"decorated"===e.type.replace(/^minecraft:/,"")?(a.push(...re(e.config.decorator,t)),ie(e.config.feature,a,t)):e}function oe(e){const a=[];let t=2;for(;e>=2;)e%t==0?(a.push(t),e/=t):t+=1;return a}console.log(oe(5e3));const ce=new Set(JSON.parse('["acacia","azalea_tree","birch","birch_bees_005","birch_other","bonus_chest","brown_mushroom_giant","cave_vine","cave_vine_in_moss","clay_pool_with_dripleaves","clay_with_dripleaves","crimson_fungi_planted","dark_oak","dripleaf","end_gateway","end_gateway_delayed","end_island","fancy_oak","fancy_oak_bees_005","flower_forest","flower_plain_decorated","forest_flower_trees","forest_flower_vegetation","forest_flower_vegetation_common","grove_vegetation","huge_brown_mushroom","huge_red_mushroom","jungle_tree_no_vine","lake_lava","meadow_trees","mega_jungle_tree","mega_pine","mega_spruce","moss_patch","moss_patch_bonemeal","moss_patch_ceiling","moss_vegetation","mushroom_field_vegetation","oak","oak_bees_005","ore_debris_large","patch_berry_bush","patch_brown_mushroom","patch_cactus","patch_red_mushroom","patch_taiga_grass","patch_waterlilly","pile_hay","pile_ice","pile_melon","pile_pumpkin","pile_snow","pine","plain_vegetation","red_mushroom_giant","rooted_azalea_trees","spring_lava_double","spruce","swamp_oak","taiga_vegetation","trees_giant","trees_giant_spruce","trees_jungle_edge","trees_mountain","trees_mountain_edge","trees_shattered_savanna","warped_fungi_planted"]')),se=k.all(k.onFile("worldgen/noise_settings",(({data:e})=>le(e))),k.onFile("dimension",(({data:e})=>{var a,t;"noise"===(null==(t=null==(a=e.generator)?void 0:a.type)?void 0:t.replace(/^minecraft:/,""))&&le(e.generator.settings)})));function le(e){fe(e.surface_rule)}function fe(e){if("object"!=typeof e)return;switch(e.type.replace(/^minecraft:/,"")){case"sequence":e.sequence.forEach((e=>fe(e)));break;case"condition":ue(e.if_true),fe(e.then_run)}}function ue(e){if("object"!=typeof e)return;switch(e.type.replace(/^minecraft:/,"")){case"not":ue(e.invert);break;case"stone_depth":e.offset=0,e.add_surface_depth=e.add_run_depth,e.add_surface_secondary_depth=!1,delete e.add_run_depth;break;case"water":case"y_above":e.surface_depth_multiplier=e.run_depth_multiplier,delete e.run_depth_multiplier}}const pe=k.all(k.debug("1.18 fixes"),k.when("worldgen",ee,se)),me=k.all(k.version("1.16.5","1.17.1",X),k.version("21w44a","1.18-pre1",pe)),_e=["advancements","dimension","dimension_type","loot_tables","predicates","tags/blocks","tags/items","worldgen/biome","worldgen/configured_carver","worldgen/configured_feature","worldgen/configured_structure_feature","worldgen/configured_surface_builder","worldgen/noise_settings","worldgen/placed_feature","worldgen/processor_list","worldgen/template_pool"];var de;function ge({pack:e,config:a,source:t,target:n,onError:r}){const[i,o]=m("Loading..."),[c,s]=m(null),[f,u]=m([]),[p,g]=m(null),[h,b]=m(!1),y=e.name.replace(/\.zip$/,`_${n}.zip`),w={};f.forEach((e=>{var a,t;if(e.match(/^[a-z0-9_-]+:[a-z0-9/_-]+ /)){const[n,...r]=e.split(" ");(null!=(t=w[a=r.join(" ")])?t:w[a]=[]).push(n)}else w[e]=[]})),_((()=>{(async()=>{try{o("Upgrading...");const{warnings:r}=await de.upgrade(e,a,t,n);await new Promise((e=>setTimeout(e,500))),r&&u(r),o("Zipping...");const i=await de.toZip(e);s(i)}catch(i){r(i),g("Error during upgrading")}})()}),[e]);return l("div",{class:"pack"},l("div",{class:"pack-head"},c&&l("a",{class:"pack-status download",href:c,download:y,"data-hover":`Download data pack for ${n}`},v.download),!c&&!p&&l("div",{class:"pack-status loading","data-hover":i},v.sync),(f.length>0||p)&&l("div",{class:"pack-status alert"+(p?" error":""),onClick:()=>{b(!h)},"data-hover":null!=p?p:"There were issues upgrading"},v.alert),l("span",{class:"pack-name"},e.name.replace(/\.zip$/,""))),f.length>0&&!h&&l("div",{class:"pack-body"},Object.entries(w).map((([e,a])=>l("div",{class:"pack-alert"},l("div",{class:"alert-name"},e),a.length>0&&l(d,null,l("p",null,"Affected files:"),l("div",{class:"alert-files"},a.map((e=>l("p",null,e))))))))))}function he({value:e,onChange:a}){const t=g(null);return l("select",{class:"version-picker",ref:t,value:e,onChange:()=>{a(t.current.value)}},y.map((e=>l("option",{value:e},e))))}function be(){const[e,a]=m([]),[t,n]=m([]),[r,i]=m("1.16.5"),[o,f]=m("1.17.1"),[u,p]=m({functions:!0,ids:!0,predicates:!0,worldgen:!0,packFormat:!0}),_=e=>{console.error(e),n([...t,{process:"upgrading",error:e}])};return l("main",{onDrop:async r=>{if(r.preventDefault(),!r.dataTransfer)return;const i=[];for(let e=0;e<r.dataTransfer.files.length;e++){const a=r.dataTransfer.files[e];a.type.match(/^application\/(x-)?zip(-compressed)?$/)&&i.push(de.fromZip(a))}if(0===i.length)n([...t,{process:"loading",error:new Error("The dropped files contain no zip files. Please zip the data pack first.")}]);else{const r=await Promise.all(i.map((async e=>{try{return await e}catch(a){return n([...t,{process:"loading",error:a}]),void console.error(a)}})));a([...e,...r.filter((e=>void 0!==e))])}},onDragOver:e=>e.preventDefault()},e.length>0&&l(d,null,l("div",{class:"packs"},e.map((e=>l(ge,s(c({},{pack:e,config:u,source:r,target:o}),{onError:_})))))),l("div",{class:"drop"},l("h1",null,"Drop data pack here"),l("p",null,"Convert from ",l(he,{value:r,onChange:i})," to ",l(he,{value:o,onChange:f})),w.order(r,o)?w.includes(r,o,"1.17.1","21w44a")?l("p",{class:"error-message"},"This upgrade is still being worked on..."):null:l("p",{class:"error-message"},"Invalid versions")),l("div",{class:"configs"},l(b,{name:"Upgrade functions",value:u.functions,onChange:e=>p(s(c({},u),{functions:e}))}),l(b,{name:"Upgrade IDs",value:u.ids,onChange:e=>p(s(c({},u),{ids:e}))}),l(b,{name:"Upgrade predicates",value:u.predicates,onChange:e=>p(s(c({},u),{predicates:e}))}),l(b,{name:"Upgrade worldgen",value:u.worldgen,onChange:e=>p(s(c({},u),{worldgen:e}))}),l(b,{name:"Upgrade pack_format",value:u.packFormat,onChange:e=>p(s(c({},u),{packFormat:e}))})),l("div",{class:"footer"},l("p",null,"Developed by Misode"),l("p",null,"Source code on ",l("a",{href:"https://github.com/misode/upgrader",target:"_blank"},"GitHub"))),l("div",{class:"main-errors"},t.map((e=>{const a=`${e.error.name}: ${e.error.message}`,r=`An error occurred while ${e.process} a data pack.\nData Pack: \x3c!-- ATTACH YOUR DATAPACK HERE --\x3e\n\n\`\`\`\n${e.error.stack}\n\`\`\`\n`,i=`https://github.com/misode/upgrader/issues/new?title=${encodeURIComponent(a)}&body=${encodeURIComponent(r)}\n`;return l("div",{class:"main-error"},l("p",null,"Something went wrong ",e.process," the data pack:"),l("p",{class:"error-message"},e.error.message),l("p",null,"You can report this as a bug ",l("a",{href:i,target:"_blank"},"on GitHub")," and upload the data pack"),l("div",{class:"error-close",onClick:()=>n(t.filter((a=>a.error.message!==e.error.message||a.process!==e.process)))},v.x))}))))}!function(e){async function a(e,a){let n=await t(e,a);const r=u(n).indent;try{return n=n.replaceAll("​","").replaceAll("‌","").replaceAll("‍","").replaceAll("\ufeff",""),n=n.split("\n").map((e=>e.replace(/^([^"\/]+)\/\/.*/,"$1"))).join("\n"),{data:JSON.parse(p(n)),indent:r}}catch(i){throw new Error(`Cannot parse "${a}": ${i.message}.`)}}async function t(e,a){const t=e.files[a];if(!t)throw new Error(`Cannot find "${a}".`);return await t.async("text")}function n(e,a,t,n){r(e,a,JSON.stringify(t,null,n)+"\n")}function r(e,a,t){e.file(a,t)}e.fromZip=async function(e){const n=await e.arrayBuffer(),r=await f.loadAsync(n),i={name:e.name,zip:r,data:{}};return await Promise.all(_e.map((async e=>{i.data[e]=await async function(e,t){const n=new RegExp(`^data/([^/]+)/${t}/(.*).json$`);return Promise.all(Object.keys(e.files).map((e=>e.match(n))).filter((e=>e)).map((async t=>c({name:`${t[1]}:${t[2]}`},await a(e,t[0])))))}(r,e)}))),i.data.functions=await async function(e){const a=/^data\/([^\/]+)\/functions\/(.*)\.mcfunction$/;return Promise.all(Object.keys(e.files).map((e=>e.match(a))).filter((e=>e)).map((async a=>({name:`${a[1]}:${a[2]}`,data:(await t(e,a[0])).split("\n")}))))}(r),i.meta=c({name:"pack"},await a(r,"pack.mcmeta")),console.log(i),i},e.toZip=async function(e){var a;_e.forEach((a=>{!function(e,a,t){t.forEach((({name:t,data:r,indent:i})=>{const[o,c]=t.split(":");n(e,`data/${o}/${a}/${c}.json`,r,i)}))}(e.zip,a,e.data[a])})),a=e.zip,e.data.functions.forEach((({name:e,data:t})=>{const[n,i]=e.split(":");r(a,`data/${n}/functions/${i}.mcfunction`,t.join("\n"))})),n(e.zip,"pack.mcmeta",e.meta.data,e.meta.indent);const t=await e.zip.generateAsync({type:"blob",compression:"DEFLATE"});return URL.createObjectURL(t)},e.upgrade=async function(e,a,t,n){const r=[],i={warn:e=>r.push(e),config:e=>a[e],read:(a,t)=>e.data[a].find((e=>e.name.replace(/^minecraft:/,"")===t.replace(/^minecraft:/,""))),create:(a,t,n)=>{e.data[a].push({name:t,indent:e.meta.indent,data:n})},source:()=>t,target:()=>n};return me(e,i),{warnings:r}}}(de||(de={}));h(l(be,null),document.body);
//# sourceMappingURL=index.9c2833d5.js.map
