{"version":3,"file":"index.157352c0.js","sources":["../../src/components/Config.tsx","../../src/components/Octicon.tsx","../../src/Version.ts","../../src/Fix.ts","../../src/fixes/1.17/Carver.ts","../../src/fixes/1.17/DimensionType.ts","../../src/fixes/1.17/Feature.ts","../../src/fixes/1.17/Function.ts","../../src/fixes/1.17/Ids.ts","../../src/fixes/1.17/NoiseSettings.ts","../../src/fixes/1.17/Predicates.ts","../../src/fixes/1.17/StructureFeature.ts","../../src/fixes/1.17/index.ts","../../src/fixes/1.18/Feature.ts","../../src/fixes/1.18/NoiseSettings.ts","../../src/fixes/1.18/index.ts","../../src/fixes/21w44a/Advancement.ts","../../src/fixes/21w44a/Biome.ts","../../src/fixes/21w44a/Dimension.ts","../../src/fixes/21w44a/Feature.ts","../../src/fixes/21w44a/index.ts","../../src/fixes/index.ts","../../src/Pack.ts","../../src/Store.ts","../../src/components/PackCard.tsx","../../src/components/VersionPicker.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["\n\nexport function Config({ name, value, onChange }: { name: string, value: boolean, onChange: (value: boolean) => unknown }) {\n\treturn <label class=\"config\">\t\n\t\t<input type=\"checkbox\" checked={value} onChange={(e) => onChange((e.target as any).checked )} />\n\t\t{name}\n\t</label>\n}\n","export const Octicon = {\n\talert: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path></svg>,\n\tdownload: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z\"></path></svg>,\n\tsync: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z\"></path></svg>,\t\n\tx: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z\"></path></svg>,\n}\n","export const Versions = ['1.16.5', '1.17.1', '21w44a', '1.18-pre5'] as const\nexport type Version = typeof Versions[number]\n\nexport namespace Version {\n\texport function ord(version: Version): number {\n\t\treturn Versions.indexOf(version)\n\t}\n\n\texport function order(before: Version, after: Version) {\n\t\treturn ord(before) < ord(after)\n\t}\n\n\texport function includes(source: Version, target: Version, from: Version, to: Version) {\n\t\treturn ord(source) < ord(to) && ord(target) > ord(from)\n\t}\n}\n","import type { categories, Pack, PackFile } from './Pack'\nimport { Version } from './Version'\n\nexport type Fix = (pack: Pack, ctx: FixContext) => unknown\n\nexport namespace Fix {\n\t/**\n\t * Runs each fix after each other\n\t */\n\texport function all(...fixes: Fix[]): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tfixes.forEach(fix => fix(pack, ctx))\n\t\t}\n\t}\n\n\t/**\n\t * A simple fix that runs on one file category\n\t */\n\texport function onFile(category: typeof categories[number] | 'functions', fix: (file: PackFile, ctx: FixContext) => unknown): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tfor (const file of pack.data[category]) {\n\t\t\t\tconst fileCtx: FixContext = {\n\t\t\t\t\t...ctx,\n\t\t\t\t\twarn: (message: string) => ctx.warn(`${file.name} ${message}`),\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tfix(file, fileCtx)\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconst error = new Error(`Error fixing ${category.replace(/^worldgen\\//, '').replaceAll('_', ' ')} ${file.name}: ${e.message}`)\n\t\t\t\t\terror.stack = e.stack\n\t\t\t\t\tconsole.warn(error)\n\t\t\t\t\tthrow error\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\texport function when(key: keyof FixConfig, ...fixes: Fix[]): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tif (ctx.config(key)) {\n\t\t\t\tfixes.forEach(fix => fix(pack, ctx))\n\t\t\t}\n\t\t}\n\t}\n\n\texport function assert(predicate: (pack: Pack, ctx: FixContext) => boolean, message: string): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tif (!predicate(pack, ctx)) {\n\t\t\t\tthrow new Error(message)\n\t\t\t}\n\t\t}\n\t}\n\n\texport function version(from: Version, to: Version, ...fixes: Fix[]): Fix {\n\t\treturn (pack, ctx) => {\n\t\t\tif (Version.includes(ctx.source(), ctx.target(), from, to)) {\n\t\t\t\tfixes.forEach(fix => fix(pack, ctx))\n\t\t\t}\n\t\t}\n\t}\n\n\texport function debug(message: string): Fix {\n\t\treturn () => {\n\t\t\tconsole.debug(message)\n\t\t}\n\t}\n}\n\nexport type FixConfig = {\n\tfunctions: boolean,\n\tids: boolean,\n\tpredicates: boolean,\n\tworldgen: boolean,\n\tpackFormat: boolean,\n}\n\nexport interface FixContext {\n\twarn: (message: string) => unknown\n\tconfig: (key: keyof FixConfig) => boolean\n\tread: (category: string, name: string) => PackFile | undefined,\n\tcreate: (category: string, name: string, data: any) => unknown,\n\tsource: () => Version,\n\ttarget: () => Version,\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Adds the new config properties to configured carvers\n */\nexport const Carver = Fix.all(\n\tFix.onFile('worldgen/configured_carver', ({ data }) => fixCarver(data)),\n\tFix.onFile('worldgen/biome', ({ data }) => {\n\t\tif (typeof data.carvers === 'object') {\n\t\t\tdata.carvers.air?.forEach(fixCarver)\n\t\t\tdata.carvers.liquid?.forEach(fixCarver)\n\t\t}\n\t}),\n)\n\nfunction fixCarver(data: any) {\n\tif (typeof data !== 'object') return\n\tconst type = data.type.replace(/^minecraft:/, '')\n\n\tdata.config.lava_level = { above_bottom: 10 }\n\tdata.config.aquifers_enabled = false\n\tif (type === 'cave' || type === 'underwater_cave' || type === 'nether_cave') {\n\t\tif (type === 'nether_cave') {\n\t\t\tdata.config.y = {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tmin_inclusive: { absolute: 0 },\n\t\t\t\tmax_inclusive: { below_top: 1 },\n\t\t\t}\n\t\t} else {\n\t\t\tdata.config.y = {\n\t\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\t\tmin_inclusive: { absolute: 0 },\n\t\t\t\tmax_inclusive: { absolute: 127 },\n\t\t\t\tinner: 8,\n\t\t\t}\n\t\t}\n\t\tdata.config.yScale = 0.5\n\t\tdata.config.horizontal_radius_multiplier = 1\n\t\tdata.config.vertical_radius_multiplier = 1\n\t\tdata.config.floor_level = -0.7\n\t} else {\n\t\tdata.config.y = {\n\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\tmin_inclusive: { absolute: 20 },\n\t\t\tmax_inclusive: { absolute: 67 },\n\t\t\tinner: 8,\n\t\t}\n\t\tdata.config.yScale = 3\n\t\tdata.config.vertical_rotation = {\n\t\t\ttype: 'minecraft:uniform',\n\t\t\tvalue: { min_inclusive: -0.125, max_exclusive: 0.125 },\n\t\t}\n\t\tdata.config.shape = {\n\t\t\tdistance_factor: {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: { min_inclusive: 0.75, max_exclusive: 1 },\n\t\t\t},\n\t\t\tthickness: {\n\t\t\t\ttype: 'minecraft:trapezoid',\n\t\t\t\tvalue: { min: 0, max: 6, plateau: 2 },\n\t\t\t},\n\t\t\twidth_smoothness: 3,\n\t\t\thorizontal_radius_factor: {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: { min_inclusive: 0.75, max_exclusive: 1 },\n\t\t\t},\n\t\t\tvertical_radius_default_factor: 1,\n\t\t\tvertical_radius_center_factor: 0,\n\t\t}\n\t}\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Adds the \"min_y\" and \"height\" properties to dimension types\n */\nexport const DimensionType = Fix.all(\n\tFix.onFile('dimension_type', ({ data }) => fixDimensionType(data)),\n\tFix.onFile('dimension', ({ data }) => {\n\t\tif (typeof data.type === 'object') {\n\t\t\tfixDimensionType(data.type)\n\t\t}\n\t}),\n)\n\nfunction fixDimensionType(data: any) {\n\tdata.min_y = 0\n\tdata.height = 256\n}\n","import type { FixContext } from '../../Fix'\nimport { Fix } from '../../Fix'\n\nexport const Feature = Fix.all(\n\tFix.onFile('worldgen/configured_feature', ({ data }, ctx) => fixFeature(data, ctx)),\n\tFix.onFile('worldgen/biome', ({ data }) => {\n\t\tif (Array.isArray(data.starts)) {\n\t\t\tdata.starts.forEach(fixFeature)\n\t\t}\n\t}),\n)\n\nfunction fixFeature(data: any, ctx: FixContext) {\n\tif (typeof data !== 'object') return\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'basalt_columns':\n\t\t\tfixUniformInt(data.config, 'reach')\n\t\t\tfixUniformInt(data.config, 'height')\n\t\t\tbreak\n\t\tcase 'decorated':\n\t\t\tfixDecorator(data.config.decorator, ctx)\n\t\t\tfixFeature(data.config.feature, ctx)\n\t\t\tbreak\n\t\tcase 'delta_feature':\n\t\t\tfixUniformInt(data.config, 'size')\n\t\t\tfixUniformInt(data.config, 'rim_size')\n\t\t\tbreak\n\t\tcase 'disk':\n\t\tcase 'ice_patch':\n\t\t\tfixUniformInt(data.config, 'radius')\n\t\t\tbreak\n\t\tcase 'emerald_ore':\n\t\t\tdata.type = 'minecraft:replace_single_block',\n\t\t\tdata.config = { targets: [ {\n\t\t\t\ttarget: {\n\t\t\t\t\tpredicate_type: 'minecraft:blockstate_match',\n\t\t\t\t\tblock_state: data.config.target,\n\t\t\t\t},\n\t\t\t\tstate: data.config.state,\n\t\t\t} ] }\n\t\t\tbreak\n\t\tcase 'flower':\n\t\tcase 'no_bonemeal_flower':\n\t\tcase 'random_patch':\n\t\t\tconst placer = data.config.block_placer\n\t\t\tif (placer.type.replace(/^minecraft:/, '') === 'column_placer') {\n\t\t\t\tplacer.size = {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\tmin_inclusive: placer.min_size,\n\t\t\t\t\t\tmax_inclusive: placer.min_size + placer.extra_size,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t\tdelete placer.min_size\n\t\t\t\tdelete placer.extra_size\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'fossil':\n\t\t\tdata.config = {\n\t\t\t\tmax_empty_corners_allowed: 4,\n\t\t\t\tfossil_processors: 'minecraft:fossil_rot',\n\t\t\t\toverlay_processors: 'minecraft:fossil_coal',\n\t\t\t\tfossil_structures: [\n\t\t\t\t\t'minecraft:fossil/spine_1',\n\t\t\t\t\t'minecraft:fossil/spine_2',\n\t\t\t\t\t'minecraft:fossil/spine_3',\n\t\t\t\t\t'minecraft:fossil/spine_4',\n\t\t\t\t\t'minecraft:fossil/skull_1',\n\t\t\t\t\t'minecraft:fossil/skull_2',\n\t\t\t\t\t'minecraft:fossil/skull_3',\n\t\t\t\t\t'minecraft:fossil/skull_4',\n\t\t\t\t],\n\t\t\t\toverlay_structures: [\n\t\t\t\t\t'minecraft:fossil/spine_1_coal',\n\t\t\t\t\t'minecraft:fossil/spine_2_coal',\n\t\t\t\t\t'minecraft:fossil/spine_3_coal',\n\t\t\t\t\t'minecraft:fossil/spine_4_coal',\n\t\t\t\t\t'minecraft:fossil/skull_1_coal',\n\t\t\t\t\t'minecraft:fossil/skull_2_coal',\n\t\t\t\t\t'minecraft:fossil/skull_3_coal',\n\t\t\t\t\t'minecraft:fossil/skull_4_coal',\n\t\t\t\t],\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'netherrack_replace_blobs':\n\t\t\tconst r = data.config.radius\n\t\t\tlet min = typeof r === 'number' ? r : r.base\n\t\t\tlet max = typeof r === 'number' ? r : r.base + r.spread\n\t\t\tif (max > 12) {\n\t\t\t\tctx.warn('Feature \"netherrack_replace_blobs\" no longer allows values above 12. Consider increasing the count of this feature.')\n\t\t\t\tmin = Math.min(12, min)\n\t\t\t\tmax = Math.min(12, max)\n\t\t\t}\n\t\t\tif (min === max) {\n\t\t\t\tdata.config.radius = min\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdata.config.radius = {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: {\n\t\t\t\t\tmin_inclusive: min,\n\t\t\t\t\tmax_inclusive: max,\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'no_surface_ore':\n\t\t\tfixOre(data)\n\t\t\tdata.type = 'minecraft:ore'\n\t\t\tdata.config.discard_chance_on_air_exposure = 1\n\t\t\tbreak\n\t\tcase 'ore':\n\t\t\tfixOre(data)\n\t\t\tbreak\n\t\tcase 'random_boolean_selector':\n\t\t\tfixFeature(data.config.feature_false, ctx)\n\t\t\tfixFeature(data.config.feature_true, ctx)\n\t\t\tbreak\n\t\tcase 'random_selector':\n\t\t\tdata.config.features.forEach((e: any) => fixFeature(e.feature, ctx))\n\t\t\tfixFeature(data.config.default, ctx)\n\t\t\tbreak\n\t\tcase 'sea_pickle':\n\t\t\tfixUniformInt(data.config, 'count')\n\t\t\tbreak\n\t\tcase 'simple_block':\n\t\t\tdata.config.to_place = {\n\t\t\t\ttype: 'minecraft:simple_state_provider',\n\t\t\t\tstate: data.config.to_place,\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'simple_random_selector':\n\t\t\tdata.config.features.forEach((feature: any) => fixFeature(feature, ctx))\n\t\t\tbreak\n\t\tcase 'tree':\n\t\t\t['radius', 'offset', 'crown_height', 'height', 'trunk_height']\n\t\t\t\t.forEach(k => fixUniformInt(data.config.foliage_placer, k))\n\t\t\tdata.config.foliage_provider = data.config.leaves_provider\n\t\t\tdelete data.config.leaves_provider\n\t\t\tdata.config.force_dirt = false\n\t\t\tdata.config.dirt_provider = {\n\t\t\t\ttype: 'minecraft:simple_state_provider',\n\t\t\t\tstate: {\n\t\t\t\t\tName: 'minecraft:dirt',\n\t\t\t\t},\n\t\t\t}\n\t\t\tdata.config.sapling_provider = {\n\t\t\t\ttype: 'minecraft:simple_state_provider',\n\t\t\t\tstate: {\n\t\t\t\t\tName: getSapling(data.config.foliage_provider),\n\t\t\t\t\tProperties: {\n\t\t\t\t\t\tstage: '0',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = {\n\t\t\t\tdecorator: {\n\t\t\t\t\ttype: 'decorated',\n\t\t\t\t\tconfig: combinedDecorators(\n\t\t\t\t\t\t{ type: 'minecraft:water_depth_threshold', config: {\n\t\t\t\t\t\t\tmax_water_depth: data.config.max_water_depth,\n\t\t\t\t\t\t} },\n\t\t\t\t\t\t{ type: 'minecraft:heightmap', config: {\n\t\t\t\t\t\t\theightmap: data.config.heightmap,\n\t\t\t\t\t\t} }\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\tfeature: {\n\t\t\t\t\ttype: 'minecraft:tree',\n\t\t\t\t\tconfig: data.config,\n\t\t\t\t},\n\t\t\t}\n\t\t\tdelete data.config.feature.config.max_water_depth\n\t\t\tdelete data.config.feature.config.heightmap\n\t\t\tbreak\n\t}\n}\n\nfunction fixUniformInt(data: any, key: string) {\n\tif (typeof data?.[key] === 'object') {\n\t\tdata[key] = {\n\t\t\ttype: 'minecraft:uniform',\n\t\t\tvalue: {\n\t\t\t\tmin_inclusive: data[key].base,\n\t\t\t\tmax_inclusive: data[key].base + data[key].spread,\n\t\t\t},\n\t\t}\n\t}\n}\n\nfunction fixOre(data: any) {\n\tdata.config.discard_chance_on_air_exposure = 0\n\tdata.config.targets = [{\n\t\ttarget: data.config.target,\n\t\tstate: data.config.state,\n\t}]\n\tdelete data.config.target\n\tdelete data.config.state\n}\n\nfunction getSapling(foliage: any) {\n\tif (foliage.type.replace(/^minecraft:/, '') === 'simple_state_provider') {\n\t\tconst match = foliage.state.Name.match(/^(?:minecraft:)?([a-z_]+)_leaves/)\n\t\tif (match) {\n\t\t\treturn `minecraft:${match[1]}_sapling`\n\t\t}\n\t}\n\treturn 'minecraft:oak_sapling'\n}\n\nfunction fixDecorator(data: any, ctx: FixContext) {\n\tif (typeof data !== 'object') return\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'carving_mask':\n\t\t\tif (data.config.probability === 0) {\n\t\t\t\tdata.type = 'minecraft:nope'\n\t\t\t\tdata.config = {}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tconst chance = 1 / data.config.probability\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:carving_mask', config: { step: data.config.step } },\n\t\t\t\t...Number.isInteger(chance) ? [\n\t\t\t\t\t{ type: 'minecraft:chance', config: { chance: chance } },\n\t\t\t\t] : [\n\t\t\t\t\t{ type: 'minecraft:count_extra', config: {\n\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\textra_count: 1,\n\t\t\t\t\t\textra_chance: data.config.probability,\n\t\t\t\t\t} },\n\t\t\t\t]\n\t\t\t)\n\t\t\tdelete data.config.probability\n\t\t\tbreak\n\t\tcase 'count':\n\t\tcase 'count_multilayer':\n\t\t\tconst c = data.config.count\n\t\t\tlet min0 = typeof c === 'number' ? c : c.base\n\t\t\tlet max0 = typeof c === 'number' ? c : c.base + c.spread\n\t\t\tif (min0 < 0) {\n\t\t\t\tctx.warn(`Decorator \"${type}\" no longer allows negative values.`)\n\t\t\t\tmin0 = Math.max(0, min0)\n\t\t\t\tmax0 = Math.max(0, max0)\n\t\t\t}\n\t\t\tif (min0 === max0) {\n\t\t\t\tdata.config.count = min0\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdata.config.count = {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: {\n\t\t\t\t\tmin_inclusive: min0,\n\t\t\t\t\tmax_inclusive: max0,\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'decorated':\n\t\t\tfixDecorator(data.config.outer, ctx)\n\t\t\tfixDecorator(data.config.inner, ctx)\n\t\t\tbreak\n\t\tcase 'heightmap_world_surface':\n\t\t\tdata.type = 'minecraft:heightmap'\n\t\t\tdata.config = { heightmap: 'WORLD_SURFACE_WG' }\n\t\t\tbreak\n\t\tcase 'top_solid_heightmap':\n\t\t\tdata.type = 'minecraft:heightmap'\n\t\t\tdata.config = { heightmap: 'OCEAN_FLOOR_WG' }\n\t\t\tbreak\n\t\tcase 'heightmap':\n\t\tcase 'heightmap_spread_double':\n\t\t\tdata.config = { heightmap: 'MOTION_BLOCKING' }\n\t\t\tbreak\n\t\tcase 'water_lake':\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:chance', config: { chance: data.config.chance } },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\t\t\tmin_inclusive: { absolute: 0 },\n\t\t\t\t\tmax_inclusive: { absolute: 256 },\n\t\t\t\t\tinner: 8,\n\t\t\t\t} } }\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'lava_lake':\n\t\t\tconst chance2 = data.config.chance / 10\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t...Number.isInteger(chance2) ? [\n\t\t\t\t\t{ type: 'minecraft:chance', config: { chance: chance2 } },\n\t\t\t\t] : [\n\t\t\t\t\t{ type: 'minecraft:count_extra', config: {\n\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\textra_count: 1,\n\t\t\t\t\t\textra_chance: 1 / chance2,\n\t\t\t\t\t} },\n\t\t\t\t],\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\t\t\tmin_inclusive: { absolute: 0 },\n\t\t\t\t\tmax_inclusive: { absolute: 256 },\n\t\t\t\t\tinner: 8,\n\t\t\t\t} } },\n\t\t\t\t{ type: 'minecraft:lava_lake', config: { chance: 10 } },\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'fire':\n\t\t\tconst count = typeof data.config.count === 'number' ? data.config.count : data.config.count.base + data.config.count.spread / 2\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:count', config: { count: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom', value: {\n\t\t\t\t\t\tmin_inclusive: 0,\n\t\t\t\t\t\tmax_inclusive: Math.ceil(count / 2),\n\t\t\t\t\t},\n\t\t\t\t} } },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: 4 },\n\t\t\t\t\tmax_inclusive: { absolute: 252 },\n\t\t\t\t} } },\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'glowstone':\n\t\t\tconst count2 = typeof data.config.count === 'number' ? data.config.count : data.config.count.base + data.config.count.spread / 2\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:count', config: { count: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom', value: {\n\t\t\t\t\t\tmin_inclusive: 0,\n\t\t\t\t\t\tmax_inclusive: Math.ceil(count2 - 1),\n\t\t\t\t\t},\n\t\t\t\t} } },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: 4 },\n\t\t\t\t\tmax_inclusive: { absolute: 252 },\n\t\t\t\t} } },\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'range':\n\t\t\tconst min = data.config.bottom_offset\n\t\t\tconst max = data.config.bottom_offset + data.config.maximum - data.config.top_offset - 1\n\t\t\tif (min === max) {\n\t\t\t\tdata.config = {\n\t\t\t\t\theight: { absolute: min },\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdata.config = {\n\t\t\t\theight: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: min },\n\t\t\t\t\tmax_inclusive: { absolute: max },\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'range_biased':\n\t\t\tconst min2 = data.config.bottom_offset\n\t\t\tconst max2 = data.config.bottom_offset + data.config.maximum - data.config.top_offset - 1\n\t\t\tdata.type = 'minecraft:range'\n\t\t\tdata.config = {\n\t\t\t\theight: {\n\t\t\t\t\ttype: 'minecraft:biased_to_bottom',\n\t\t\t\t\tmin_inclusive: { absolute: min2 },\n\t\t\t\t\tmax_inclusive: { absolute: max2 },\n\t\t\t\t\tcutoff: min2,\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'range_very_biased':\n\t\t\tconst min3 = data.config.bottom_offset\n\t\t\tconst max3 = data.config.bottom_offset + data.config.maximum - data.config.top_offset - 1\n\t\t\tdata.type = 'minecraft:range'\n\t\t\tdata.config = {\n\t\t\t\theight: {\n\t\t\t\t\ttype: 'minecraft:very_biased_to_bottom',\n\t\t\t\t\tmin_inclusive: { absolute: min3 },\n\t\t\t\t\tmax_inclusive: { absolute: max3 },\n\t\t\t\t\tcutoff: min3,\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'depth_average':\n\t\t\tdata.type = 'minecraft:range'\n\t\t\tdata.config = {\n\t\t\t\theight: {\n\t\t\t\t\ttype: 'minecraft:trapezoid',\n\t\t\t\t\tmin_inclusive: { absolute: data.config.baseline },\n\t\t\t\t\tmax_inclusive: { absolute: data.config.baseline + data.config.spread },\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'emerald_ore':\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:count', config: { count: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tvalue: { min_inclusive: 3, max_inclusive: 8 },\n\t\t\t\t} } },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: 4 },\n\t\t\t\t\tmax_inclusive: { absolute: 31 },\n\t\t\t\t} } }\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'end_island':\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = combinedDecorators(\n\t\t\t\t{ type: 'minecraft:chance', config: { chance: 14 } },\n\t\t\t\t{ type: 'minecraft:count_extra', config: {\n\t\t\t\t\tcount: 1,\n\t\t\t\t\textra_count: 1,\n\t\t\t\t\textra_chance: 0.25,\n\t\t\t\t} },\n\t\t\t\t{ type: 'minecraft:square', config: {} },\n\t\t\t\t{ type: 'minecraft:range', config: { height: {\n\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\tmin_inclusive: { absolute: 55 },\n\t\t\t\t\tmax_inclusive: { absolute: 70 },\n\t\t\t\t} } }\n\t\t\t)\n\t\t\tbreak\n\t\tcase 'magma':\n\t\t\tctx.warn('Removed decorator \"magma\" previously used the sea level. Assumed sea level is 32 and replaced with a range decorator between 27 and 36.')\n\t\t\tdata.type = 'minecraft:range'\n\t\t\tdata.config = { height: {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tmin_inclusive: { absolute: 27 },\n\t\t\t\tmax_inclusive: { absolute: 36 },\n\t\t\t} }\n\t\t\tbreak\n\t}\n}\n\nfunction combinedDecorators(...decorators: any[]): any {\n\treturn {\n\t\touter: decorators[0],\n\t\tinner: decorators.length === 2 ? decorators[1] : {\n\t\t\ttype: 'minecraft:decorated',\n\t\t\tconfig: combinedDecorators(...decorators.slice(1)),\n\t\t},\n\t}\n}\n","import { Fix } from '../../Fix'\n\nconst replaceitemRegex = /replaceitem ((?:entity @[parse](\\[.*\\]*)?|block( [^ ]+){3}) [a-z0-9.]+) /\nconst timeObjectiveRegex = /scoreboard objectives add ([^ ]+) (minecraft.)?custom:(minecraft.)?play_one_minute/\n\n/**\n * Upgrades /replaceitem to /item replace ... with\n */\nexport const Function = Fix.onFile('functions', ({ data }: { data: string[] }) => {\n\tdata.forEach((line, i) => {\n\t\tif (line.startsWith('replaceitem ') || line.startsWith('execute ')) {\n\t\t\tdata[i] = data[i].replace(replaceitemRegex, 'item replace $1 with ')\n\t\t}\n\t\tif (line.startsWith('scoreboard') || line.startsWith('execute')) {\n\t\t\tdata[i] = data[i].replace(timeObjectiveRegex, 'scoreboard objectives add $1 $2custom:$3play_time')\n\t\t}\n\t})\n})\n","import { Fix } from '../../Fix'\n\n/**\n * Renames grass_path to dirt_path\n */\nexport const Ids = Fix.all(\n\tFix.onFile('tags/blocks', ({ data }) => fixTag(data)),\n\tFix.onFile('tags/items', ({ data }) => fixTag(data)),\n)\n\nfunction fixTag(data: any) {\n\tdata.values?.forEach((_: any, i: number) => fixIds(data.values, i))\n}\n\nexport function fixIds(data: any, key: string | number) {\n\tconst id = data[key].replace(/^minecraft:/, '')\n\n\tif (id === 'grass_path') {\n\t\tdata[key] = 'minecraft:dirt_path'\n\t}\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Adds the \"min_y\" and \"height\" properties to dimension types\n */\nexport const NoiseSettings = Fix.all(\n\tFix.onFile('worldgen/noise_settings', ({ data }) => fixNoiseSettings(data)),\n\tFix.onFile('dimension', ({ data }) => {\n\t\tif (data.generator?.type?.replace(/^minecraft:/, '') === 'noise') {\n\t\t\tfixNoiseSettings(data.generator.settings)\n\t\t}\n\t}),\n)\n\nfunction fixNoiseSettings(data: any) {\n\tif (typeof data !== 'object') return\n\n\tif (data.bedrock_roof_position <= -10) data.bedrock_roof_position = -2147483648\n\tif (data.bedrock_floor_position <= -10) data.bedrock_floor_position = -2147483648\n\n\tdata.min_surface_level = 0\n\tdata.noise_caves_enabled = false\n\tdata.noodle_caves_enabled = false\n\tdata.aquifers_enabled = false\n\tdata.deepslate_enabled = false\n\tdata.ore_veins_enabled = false\n\tdata.noise.min_y = 0\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Fixes item and block predicates all over predicates, advancements and loot tables\n */\nexport const Predicates = Fix.all(\n\tFix.onFile('predicates', ({ data }) => {\n\t\tif (Array.isArray(data)) {\n\t\t\tdata.forEach(fixCondition)\n\t\t} else {\n\t\t\tfixCondition(data)\n\t\t}\n\t}),\n\tFix.onFile('advancements', ({ data }) => {\n\t\tObject.values(data.criteria).forEach(fixCriterion)\n\t}),\n\tFix.onFile('loot_tables', ({ data }) => {\n\t\tdata.pools?.forEach(fixPool)\n\t}),\n)\n\nfunction fixCriterion(data: any) {\n\tif (typeof data.conditions !== 'object') return\n\n\tfixEntity(data.conditions.entity)\n\tfixEntity(data.conditions.player)\n\tfixEntity(data.conditions.parent)\n\tfixEntity(data.conditions.partner)\n\tfixEntity(data.conditions.child)\n\tfixEntity(data.conditions.villager)\n\tfixEntity(data.conditions.zombie)\n\tfixEntity(data.conditions.projectile)\n\tfixEntity(data.conditions.shooter)\n\tdata.conditions.victims?.forEach(fixEntity)\n\n\tfixItem(data.conditions.item)\n\tdata.conditions.items?.forEach(fixItem)\n\n\tfixDamage(data.conditions.damage)\n\tfixDamage(data.conditions.killing_blow)\n\t\n\tfixLocation(data.conditions.location)\n\tfixLocation(data.conditions.entered)\n\tfixLocation(data.conditions.exited)\n}\n\nfunction fixPool(data: any) {\n\tdata.entries?.forEach(fixEntry)\n\tdata.conditions?.forEach(fixCondition)\n}\n\nfunction fixEntry(data: any) {\n\tdata.children?.forEach(fixEntry)\n\tdata.conditions?.forEach(fixCondition)\n}\n\nfunction fixCondition(data: any) {\n\tconst condition = data.condition.replace(/^minecraft:/, '')\n\tswitch (condition) {\n\t\tcase 'match_tool':\n\t\t\tfixItem(data.predicate)\n\t\t\tbreak\n\t\tcase 'entity_properties':\n\t\t\tfixEntity(data.predicate)\n\t\t\tbreak\n\t\tcase 'damage_source_properties':\n\t\t\tfixDamage(data.predicate)\n\t\t\tbreak\n\t\tcase 'location_check':\n\t\t\tfixLocation(data.predicate)\n\t\t\tbreak\n\t}\n}\n\nfunction fixDamage(data: any) {\n\tif (typeof data !== 'object') return\n\n\tfixEntity(data.source_entity)\n\tfixEntity(data.direct_entity)\n\tfixDamage(data.type)\n}\n\nfunction fixEntity(data: any) {\n\tif (typeof data !== 'object') return\n\n\tif (Array.isArray(data)) {\n\t\tdata.forEach(fixCondition)\n\t\treturn\n\t}\n\n\tif (data.equipment) {\n\t\tObject.values(data.equipment).forEach(fixItem)\n\t}\n\tfixEntity(data.vehicle)\n\tfixEntity(data.targeted_entity)\n\tfixLocation(data.location)\n}\n\nfunction fixLocation(data: any) {\n\tif (typeof data !== 'object') return\n\n\tfixBlock(data.block)\n}\n\nfunction fixItem(data: any) {\n\tif (typeof data !== 'object') return\n\n\tif (data.item) {\n\t\tdata.items = [data.item]\n\t\tdelete data.item\n\t}\n}\n\nfunction fixBlock(data: any) {\n\tif (typeof data !== 'object') return\n\n\tif (data.block) {\n\t\tdata.blocks = [data.block]\n\t\tdelete data.block\n\t}\n}\n","import { Fix } from '../../Fix'\n\n/**\n * Adds the new config property to the nether_fossil structure feature\n */\nexport const StructureFeature = Fix.all(\n\tFix.onFile('worldgen/configured_structure_feature', ({ data }) => fixStructureFeature(data)),\n\tFix.onFile('worldgen/biome', ({ data }) => {\n\t\tif (Array.isArray(data.starts)) {\n\t\t\tdata.starts.forEach(fixStructureFeature)\n\t\t}\n\t}),\n)\n\nfunction fixStructureFeature(data: any) {\n\tif (typeof data !== 'object') return\n\tconst type = data.type.replace(/^minecraft:/, '')\n\n\tif (type === 'nether_fossil') {\n\t\tif (!data.config) data.config = {}\n\t\tdata.config.height = {\n\t\t\ttype: 'minecraft:uniform',\n\t\t\tmin_inclusive: { absolute: 32 },\n\t\t\tmax_inclusive: { below_top: 2 },\n\t\t}\n\t}\n}\n","import { Fix } from '../../Fix'\nimport { Carver } from './Carver'\nimport { DimensionType } from './DimensionType'\nimport { Feature } from './Feature'\nimport { Function } from './Function'\nimport { Ids } from './Ids'\nimport { NoiseSettings } from './NoiseSettings'\nimport { Predicates } from './Predicates'\nimport { StructureFeature } from './StructureFeature'\n\nexport const Fixes17 = Fix.all(\n\tFix.debug('1.17 fixes'),\n\tFix.assert(pack => pack.meta.data.pack.pack_format < 7, 'This pack already has pack_format 7 or higher and cannot be upgraded.'),\n\tFix.when('ids', Ids),\n\tFix.when('predicates', Predicates),\n\tFix.when('functions', Function),\n\tFix.when('worldgen',\n\t\tDimensionType,\n\t\tNoiseSettings,\n\t\tStructureFeature,\n\t\tCarver,\n\t\tFeature\n\t),\n\tFix.when('packFormat', pack => pack.meta.data.pack.pack_format = 7),\n)\n","import type { FixContext } from '../../Fix'\nimport { Fix } from '../../Fix'\nimport type { PackFile } from '../../Pack'\n\nexport const Feature = Fix.all(\n\tFix.onFile('worldgen/configured_feature', fixRootFeature),\n\n\t// Remove or rename vanilla configured features\n\tFix.onFile('worldgen/biome', ({ data }, ctx) => {\n\t\tdata.player_spawn_friendly = undefined\n\n\t\tif (!Array.isArray(data.features)) return\n\t\tdata.features = data.features.map((d: any) => {\n\t\t\tif (!Array.isArray(d)) return d\n\t\t\treturn d.flatMap(e => {\n\t\t\t\tif (typeof e !== 'string') return e\n\t\t\t\tconst replacement = fixFeatureId(e, ctx)\n\t\t\t\treplacement.forEach(r => {\n\t\t\t\t\tconst file = ctx.read('worldgen/placed_feature', r)\n\t\t\t\t\tif (!file) return\n\t\t\t\t\tif (file.data.placement.find((p: any) => p.type === 'minecraft:biome')) return\n\t\t\t\t\tfile.data.placement.push({ type: 'minecraft:biome' })\n\t\t\t\t})\n\t\t\t\treturn replacement\n\t\t\t})\n\t\t})\n\t}),\n)\n\nfunction fixFeatureId(str: string, ctx: FixContext) {\n\tconst id = str.replace(/^minecraft:/, '')\n\tif (id === 'meadow_trees') {\n\t\treturn ['minecraft:trees_meadow']\n\t} else if (id === 'lake_lava') {\n\t\treturn ['minecraft:lake_lava_surface', 'minecraft:lake_lava_underground']\n\t} else if (FeatureRemovals.has(id) && ctx.read('worldgen/placed_feature', id) === undefined) {\n\t\treturn []\n\t} else {\n\t\treturn [str]\n\t}\n}\n\nfunction fixRootFeature(file: PackFile, ctx: FixContext) {\n\tif (typeof file.data !== 'object') return\n\n\tconst f = fixFeature(file.data, ctx)\n\tif (typeof f.feature === 'string') {\n\t\tfile.data = {\n\t\t\ttype: 'minecraft:random_selector',\n\t\t\tconfig: {\n\t\t\t\tfeatures: [],\n\t\t\t\tdefault: f.feature,\n\t\t\t},\n\t\t}\n\t} else {\n\t\tfile.data = {\n\t\t\ttype: f?.feature.type,\n\t\t\tconfig: f?.feature.config,\n\t\t}\n\t}\n\tctx.create('worldgen/placed_feature', file.name, {\n\t\tfeature: typeof f.feature === 'string' ? f.feature : file.name,\n\t\tplacement: f?.placement,\n\t})\n}\n\nfunction fixFeature(data: any, ctx: FixContext) {\n\tif (typeof data !== 'object') {\n\t\treturn {\n\t\t\tfeature: data,\n\t\t\tplacement: [],\n\t\t}\n\t}\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tconst placement: any[] = []\n\tswitch (type) {\n\t\tcase 'decorated':\n\t\t\tconst feature = collectDecorators(data, placement, ctx)\n\t\t\tdata = fixFeature(feature, ctx)?.feature\n\t\t\tbreak\n\t\tcase 'glow_lichen':\n\t\t\tdata.config.can_be_placed_on = [...new Set(\n\t\t\t\tdata.config.can_be_placed_on.map((b: any) => b.Name)\n\t\t\t)]\n\t\t\tbreak\n\t\tcase 'lake':\n\t\t\tdata.config = {\n\t\t\t\tfluid: {\n\t\t\t\t\ttype: 'minecraft:simple_state_provider',\n\t\t\t\t\tstate: data.config.state,\n\t\t\t\t},\n\t\t\t\tbarrier: {\n\t\t\t\t\ttype: 'minecraft:simple_state_provider',\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tName: 'minecraft:stone',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'nether_forest_vegetation':\n\t\t\tdata.config.spread_width = 8\n\t\t\tdata.config.spread_height = 4\n\t\t\tbreak\n\t\tcase 'random_boolean_selector':\n\t\t\tdata.config.feature_false = refPlacedFeature(fixFeature(data.config.feature_false, ctx))\n\t\t\tdata.config.feature_true = refPlacedFeature(fixFeature(data.config.feature_true, ctx))\n\t\t\tbreak\n\t\tcase 'root_system':\n\t\t\tdata.config.allowed_tree_position = { type: 'minecraft:true' }\n\t\t// eslint-disable-next-line no-fallthrough\n\t\tcase 'random_patch':\n\t\tcase 'flower':\n\t\tcase 'no_bonemeal_flower':\n\t\t\tdata.config.feature = refPlacedFeature(fixFeature(data.config.feature, ctx))\n\t\t\tbreak\n\t\tcase 'random_selector':\n\t\t\tdata.config.features.forEach((e: any) => {\n\t\t\t\te.feature = refPlacedFeature(fixFeature(e.feature, ctx))\n\t\t\t})\n\t\t\tdata.config.default = refPlacedFeature(fixFeature(data.config.default, ctx))\n\t\t\tbreak\n\t\tcase 'simple_random_selector':\n\t\t\tdata.config.features = data.config.features.map((f: any) => {\n\t\t\t\treturn refPlacedFeature(fixFeature(f, ctx))\n\t\t\t})\n\t\t\tbreak\n\t\tcase 'twisting_vines':\n\t\t\tdata.config = {\n\t\t\t\tspread_width: 8,\n\t\t\t\tspread_height: 4,\n\t\t\t\tmax_height: 8,\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'vegetation_patch':\n\t\tcase 'waterlogged_vegetation_patch':\n\t\t\tdata.config.vegetation_feature = refPlacedFeature(fixFeature(data.config.vegetation_feature, ctx))\n\t}\n\treturn {\n\t\tfeature: data,\n\t\tplacement,\n\t}\n}\n\nfunction refPlacedFeature(data: { feature: unknown, placement: unknown[] }) {\n\tif (typeof data.feature === 'string' && data.placement.length === 0) {\n\t\tconst id = data.feature.replace(/^minecraft:/, '')\n\t\tif (!FeatureRemovals.has(id)) {\n\t\t\treturn data.feature\n\t\t}\n\t}\n\treturn data\n}\n\nfunction fixDecorator(data: any, ctx: FixContext): any[] {\n\tif (typeof data !== 'object') return []\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'block_filter':\n\t\t\treturn [{ type: 'minecraft:block_predicate_filter', ...data.config }]\n\t\tcase 'cave_surface':\n\t\t\tconst steps = data.config.floor_to_ceiling_search_range\n\t\t\tif (steps > 32) {\n\t\t\t\tctx.warn('Converting cave_surface decorator into environment_scan: \"max_steps\" is limited to 32.')\n\t\t\t}\n\t\t\tconst config = {\n\t\t\t\tdirection_of_search: data.config.surface === 'ceiling' ? 'up' : 'down',\n\t\t\t\ttarget_condition: {\n\t\t\t\t\ttype: 'minecraft:solid',\n\t\t\t\t},\n\t\t\t\tallowed_search_condition: {\n\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\tblocks: [\n\t\t\t\t\t\t'minecraft:air',\n\t\t\t\t\t\t...data.config.allow_water ? ['minecraft:water'] : [],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tmax_steps: Math.min(32, steps),\n\t\t\t}\n\t\t\treturn [{ type: 'minecraft:environment_scan', ...config }]\n\t\tcase 'count_multilayer':\n\t\t\treturn [{ type: 'minecraft:count_on_every_layer', ...data.config }]\n\t\tcase 'chance':\n\t\t\treturn [{ type: 'minecraft:rarity_filter', ...data.config }]\n\t\tcase 'count_extra':\n\t\t\tlet max = data.config.count + data.config.extra_count\n\t\t\tif (max > 256) {\n\t\t\t\tlet factors = [max]\n\t\t\t\tmax -= 1\n\t\t\t\twhile (factors.some(f => f > 256)) {\n\t\t\t\t\tmax += 1\n\t\t\t\t\tfactors = primeFactors(max)\n\t\t\t\t}\n\n\t\t\t\tfor (let n = 2; n <= 5; n += 1) {\n\t\t\t\t\tconst counts = []\n\t\t\t\t\tfor (let i = 0; i < n; i += 1) {\n\t\t\t\t\t\tcounts.push(factors.filter((_, j) => j % n === i).reduce((a, b) => a * b))\n\t\t\t\t\t}\n\t\t\t\t\tif (counts.every(p => p <= 256)) {\n\t\t\t\t\t\treturn counts.map(count => ({ type: 'minecraft:count', count }))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error(`Extremely high count: ${data.config.count + data.config.extra_count}`)\n\t\t\t}\n\t\t\tconst count = {\n\t\t\t\ttype: 'minecraft:weighted_list',\n\t\t\t\tdistribution: [\n\t\t\t\t\t{\n\t\t\t\t\t\tweight: Math.round(100 * (1 - data.config.extra_chance)),\n\t\t\t\t\t\tdata: Math.min(256, data.config.count),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tweight: Math.round(100 * data.config.extra_chance),\n\t\t\t\t\t\tdata: Math.min(256, max),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\t\treturn [{ type: 'minecraft:count', count }]\n\t\tcase 'count_noise':\n\t\t\treturn [{ type: 'minecraft:noise_threshold_count', ...data.config }]\n\t\tcase 'count_noise_biased':\n\t\t\treturn [{ type: 'minecraft:noise_based_count', ...data.config }]\n\t\tcase 'dark_oak_tree':\n\t\t\treturn [{ type: 'minecraft:count', count: 16 }, { type: 'minecraft:in_square' }]\n\t\tcase 'decorated':\n\t\t\tconst outer = fixDecorator(data.config.outer, ctx)\n\t\t\tconst inner = fixDecorator(data.config.inner, ctx)\n\t\t\treturn [...outer, ...inner]\n\t\tcase 'end_gateway':\n\t\t\tconst y_spread = {\n\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\tvalue: {\n\t\t\t\t\tmin_inclusive: 3,\n\t\t\t\t\tmax_inclusive: 9,\n\t\t\t\t},\n\t\t\t}\n\t\t\treturn [{ type: 'minecraft:random_offset', xz_spread: 0, y_spread }]\n\t\tcase 'iceberg':\n\t\t\treturn [{ type: 'minecraft:in_square' }]\n\t\tcase 'lava_lake':\n\t\t\treturn [{ type: 'minecraft:rarity_filter', chance: 10 }]\n\t\tcase 'nope':\n\t\t\treturn []\n\t\tcase 'range':\n\t\t\treturn [{ type: 'minecraft:height_range', ...data.config }]\n\t\tcase 'scatter':\n\t\t\treturn [{ type: 'minecraft:random_offset', ...data.config }]\n\t\tcase 'square':\n\t\t\treturn [{ type: 'minecraft:in_square', ...data.config }]\n\t\tcase 'surface_relative_threshold':\n\t\t\treturn [{ type: 'minecraft:surface_relative_threshold_filter', ...data.config }]\n\t\tcase 'water_depth_threshold':\n\t\t\treturn [{ type: 'minecraft:surface_water_depth_filter', ...data.config }]\n\t\tdefault:\n\t\t\treturn [{ type, ...data.config }]\n\t}\n}\n\nfunction collectDecorators(data: any, placement: any[], ctx: FixContext): any {\n\tif (typeof data !== 'object') return data\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tif (type === 'decorated') {\n\t\tplacement.push(...fixDecorator(data.config.decorator, ctx))\n\t\treturn collectDecorators(data.config.feature, placement, ctx)\n\t}\n\treturn data\n}\n\nfunction primeFactors(n: number) {\n\tconst factors = []\n\tlet divisor = 2\n\twhile (n >= 2) {\n\t\tif (n % divisor == 0) {\n\t\t\tfactors.push(divisor)\n\t\t\tn = n / divisor\n\t\t} else {\n\t\t\tdivisor += 1\n\t\t}\n\t}\n\treturn factors\n}\n\nconst FeatureRemovals = new Set(JSON.parse('[\"acacia\",\"azalea_tree\",\"birch\",\"birch_bees_005\",\"birch_other\",\"bonus_chest\",\"brown_mushroom_giant\",\"cave_vine\",\"cave_vine_in_moss\",\"clay_pool_with_dripleaves\",\"clay_with_dripleaves\",\"crimson_fungi_planted\",\"dark_oak\",\"dripleaf\",\"end_gateway\",\"end_gateway_delayed\",\"end_island\",\"fancy_oak\",\"fancy_oak_bees_005\",\"flower_forest\",\"flower_plain_decorated\",\"forest_flower_trees\",\"forest_flower_vegetation\",\"forest_flower_vegetation_common\",\"grove_vegetation\",\"huge_brown_mushroom\",\"huge_red_mushroom\",\"jungle_tree_no_vine\",\"lake_lava\",\"meadow_trees\",\"mega_jungle_tree\",\"mega_pine\",\"mega_spruce\",\"moss_patch\",\"moss_patch_bonemeal\",\"moss_patch_ceiling\",\"moss_vegetation\",\"mushroom_field_vegetation\",\"oak\",\"oak_bees_005\",\"ore_debris_large\",\"patch_berry_bush\",\"patch_brown_mushroom\",\"patch_cactus\",\"patch_red_mushroom\",\"patch_taiga_grass\",\"patch_waterlilly\",\"pile_hay\",\"pile_ice\",\"pile_melon\",\"pile_pumpkin\",\"pile_snow\",\"pine\",\"plain_vegetation\",\"red_mushroom_giant\",\"rooted_azalea_trees\",\"spring_lava_double\",\"spruce\",\"swamp_oak\",\"taiga_vegetation\",\"trees_giant\",\"trees_giant_spruce\",\"trees_jungle_edge\",\"trees_mountain\",\"trees_mountain_edge\",\"trees_shattered_savanna\",\"warped_fungi_planted\"]'))\n","import { Fix } from '../../Fix'\n\nexport const NoiseSettings = Fix.all(\n\tFix.onFile('worldgen/noise_settings', ({ data }) => fixNoiseSettings(data)),\n\tFix.onFile('dimension', ({ data }) => {\n\t\tif (data.generator?.type?.replace(/^minecraft:/, '') === 'noise') {\n\t\t\tfixNoiseSettings(data.generator.settings)\n\t\t}\n\t}),\n)\n\nfunction fixNoiseSettings(data: any) {\n\tfixSurfaceRule(data.surface_rule)\n}\n\nfunction fixSurfaceRule(data: any) {\n\tif (typeof data !== 'object') return\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'sequence':\n\t\t\tdata.sequence.forEach((s: any) => fixSurfaceRule(s))\n\t\t\tbreak\n\t\tcase 'condition':\n\t\t\tfixSurfaceCondition(data.if_true)\n\t\t\tfixSurfaceRule(data.then_run)\n\t}\n}\n\nfunction fixSurfaceCondition(data: any) {\n\tif (typeof data !== 'object') return\n\tconst condition = data.type.replace(/^minecraft:/, '')\n\tswitch (condition) {\n\t\tcase 'not':\n\t\t\tfixSurfaceCondition(data.invert)\n\t\t\tbreak\n\t\tcase 'stone_depth':\n\t\t\tdata.offset = 0\n\t\t\tdata.add_surface_depth = data.add_run_depth\n\t\t\tdata.add_surface_secondary_depth = false\n\t\t\tdelete data.add_run_depth\n\t\t\tbreak\n\t\tcase 'water':\n\t\tcase 'y_above':\n\t\t\tdata.surface_depth_multiplier = data.run_depth_multiplier\n\t\t\tdelete data.run_depth_multiplier\n\t}\n}\n","import { Fix } from '../../Fix'\nimport { Feature } from './Feature'\nimport { NoiseSettings } from './NoiseSettings'\n\nexport const Fixes18 = Fix.all(\n\tFix.debug('1.18 fixes'),\n\tFix.when('worldgen',\n\t\tFeature,\n\t\tNoiseSettings\n\t),\n)\n","import { Fix } from '../../Fix'\n\nexport const Advancement = Fix.all(\n\tFix.onFile('advancements', ({ data }) => {\n\t\tObject.values(data.criteria).forEach(fixCriterion)\n\t}),\n)\n\nfunction fixCriterion(data: any) {\n\tconst trigger = data.trigger.replace(/^minecraft:/, '')\n\tswitch (trigger) {\n\t\tcase 'nether_travel':\n\t\t\tconst { distance, entered, exited, player } = data.conditions\n\t\t\tdata.conditions = {\n\t\t\t\tplayer: mergePlayerLocation(player, exited),\n\t\t\t\tstart_position: entered,\n\t\t\t\tdistance: distance,\n\t\t\t}\n\t\t\tbreak\n\t}\n}\n\nfunction mergePlayerLocation(player: any, location: any) {\n\tif (player === undefined) return location\n\tif (Array.isArray(player) && player.length >= 1) {\n\t\treturn player // TODO\n\t}\n\treturn {\n\t\t...player,\n\t\tlocation: {\n\t\t\t...player.location,\n\t\t\t...location,\n\t\t},\n\t}\n}\n","import type { FixContext } from '../../Fix'\nimport { Fix } from '../../Fix'\nimport type { PackFile } from '../../Pack'\n\nexport const Biome = Fix.all(\n\tFix.onFile('worldgen/biome', fixBiome),\n)\n\nfunction fixBiome({ data }: PackFile, ctx: FixContext) {\n\tctx.warn('Biome \"depth\" and \"scale\" were removed and replaced with a more powerful terrain shaper option in noise settings. No automatic upgrade possible.')\n\tdata.depth = undefined\n\tdata.scale = undefined\n\n\tctx.warn('Biome \"surface_builder\" was removed and replaced with a more powerful surface_rule option in noise settings. No automatic upgrade possible.')\n\tdata.surface_builder = undefined\n\n\tif (Array.isArray(data.starts) && data.starts.length > 0) {\n\t\tctx.warn('Biome \"starts\" was removed, custom structures are not supported in 1.18.')\n\t}\n\tdata.starts = undefined\n}\n","import type { FixContext } from '../../Fix'\nimport { Fix } from '../../Fix'\n\nexport const Dimension = Fix.all(\n\tFix.onFile('worldgen/noise_settings', ({ data }, ctx) => fixNoiseSettings(data, ctx)),\n\tFix.onFile('dimension', ({ data }, ctx) => {\n\t\tif (data.generator?.type?.replace(/^minecraft:/, '') === 'noise') {\n\t\t\tconst biomes = fixBiomeSource(data.generator.biome_source, ctx)\n\t\t\tfixNoiseSettings(data.generator.settings, ctx, biomes)\n\t\t}\n\t}),\n)\n\n// Returns a list of biome IDs\nfunction fixBiomeSource(data: any, ctx: FixContext) {\n\tif (typeof data !== 'object') return []\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'fixed':\n\t\t\treturn [data.biome]\n\t\tcase 'checkerboard':\n\t\t\treturn [...new Set<string>(data.biomes)]\n\t\tcase 'multi_noise':\n\t\t\tdata.seed = undefined\n\t\t\tif (data.preset.replace(/^minecraft:/, '') === 'nether') {\n\t\t\t\treturn ['nether_wastes', 'soul_sand_valley', 'crimson_forest', 'warped_forest', 'basalt_deltas']\n\t\t\t}\n\t\t\tdata.altitude_noise = undefined\n\t\t\tdata.temperature_noise = undefined\n\t\t\tdata.humidity_noise = undefined\n\t\t\tdata.weirdness_noise = undefined\n\t\t\tdata.biomes.forEach((b: any) => {\n\t\t\t\tb.parameters = {\n\t\t\t\t\ttemperature: b.parameters.temperature,\n\t\t\t\t\thumidity: b.parameters.humidity,\n\t\t\t\t\tcontinentalness: b.parameters.altitude,\n\t\t\t\t\terosion: 0,\n\t\t\t\t\tweirdness: b.parameters.weirdness,\n\t\t\t\t\tdepth: 0,\n\t\t\t\t\toffset: b.parameters.offset,\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn [...new Set<string>(data.biomes.map((b: any) => b.biome))]\n\t\tcase 'vanilla_layered':\n\t\t\tctx.warn('Removed biome source \"vanilla_layered\", replaced with the multi noise overworld preset.')\n\t\t\tdata.type = 'multi_noise'\n\t\t\tdata.preset = 'minecraft:overworld'\n\t\t\treturn []\n\t}\n\treturn []\n}\n\nfunction fixNoiseSettings(data: any, ctx: FixContext, biomes: string[] = []) {\n\tif (typeof data === 'string') {\n\t\tconst file = ctx.read('worldgen/noise_settings', data)\n\t\tif (file) {\n\t\t\tfixNoiseSettings(file.data, ctx, biomes)\n\t\t}\n\t\treturn\n\t}\n\tif (typeof data !== 'object') return\n\n\tdata.noise.top_slide.target /= 128\n\tdata.noise.bottom_slide.target /= 128\n\t\n\tdata.min_surface_level = undefined\n\tdata.noise.simplex_surface_noise = undefined\n\tdata.noise.random_density_offset = undefined\n\n\tdata.noise.terrain_shaper = {\n\t\toffset: data.noise.density_offset,\n\t\tfactor: data.noise.density_factor,\n\t\tjaggedness: 0,\n\t}\n\n\tdata.noise.density_offset = undefined\n\tdata.noise.density_factor = undefined\n\n\tconst rules = []\n\n\tif (data.bedrock_floor_position > -10) {\n\t\trules.push(ifTrue('vertical_gradient', {\n\t\t\trandom_name: 'minecraft:bedrock_floor',\n\t\t\ttrue_at_and_below: { above_bottom: data.bedrock_floor_position + 5 },\n\t\t\tfalse_at_and_above: { above_bottom: data.bedrock_floor_position },\n\t\t}).thenRun('block', {\n\t\t\tresult_state: { Name: 'minecraft:bedrock' },\n\t\t}))\n\t}\n\tif (data.bedrock_roof_position > -10) {\n\t\trules.push(ifNotTrue('vertical_gradient', {\n\t\t\trandom_name: 'minecraft:bedrock_roof',\n\t\t\ttrue_at_and_below: { below_top: data.bedrock_roof_position + 5 },\n\t\t\tfalse_at_and_above: { below_top: data.bedrock_roof_position },\n\t\t}).thenRun('block', {\n\t\t\tresult_state: { Name: 'minecraft:bedrock' },\n\t\t}))\n\t}\n\t// TODO: add surface rules for the biomes\n\tif (data.deepslate_enabled) {\n\t\trules.push(ifTrue('vertical_gradient', {\n\t\t\trandom_name: 'minecraft:deepslate',\n\t\t\ttrue_at_and_below: { absolute: 0 },\n\t\t\tfalse_at_and_above: { absolute: 8 },\n\t\t}).thenRun('block', {\n\t\t\tresult_state: { Name: 'minecraft:deepslate', Properties: { axis: 'y' } },\n\t\t}))\n\t}\n\n\tdata.surface_rule = {\n\t\ttype: 'minecraft:sequence',\n\t\tsequence: rules,\n\t}\n}\n\nfunction ifTrue(conditionType: string, conditionData: any) {\n\treturn {\n\t\tthenRun: (ruleType: string, ruleData: any) => ({\n\t\t\ttype: 'minecraft:condition',\n\t\t\tif_true: { type: `minecraft:${conditionType}`, ...conditionData },\n\t\t\tthen_run: { type: `minecraft:${ruleType}`, ...ruleData },\n\t\t}),\n\t}\n}\n\nfunction ifNotTrue(conditionType: string, conditionData: any) {\n\treturn ifTrue('not', {\n\t\tinvert: { type: `minecraft:${conditionType}`, ...conditionData },\n\t})\n}\n","import type { FixContext } from '../../Fix'\nimport { Fix } from '../../Fix'\n\nexport const Feature = Fix.all(\n\tFix.onFile('worldgen/configured_feature', ({ data }, ctx) => fixFeature(data, ctx)),\n)\n\nfunction fixFeature(data: any, ctx: FixContext) {\n\tif (typeof data !== 'object') return\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'decorated':\n\t\t\tfixDecorator(data.config.decorator, ctx)\n\t\t\tfixFeature(data.config.feature, ctx)\n\t\t\tbreak\n\t\tcase 'random_boolean_selector':\n\t\t\tfixFeature(data.config.feature_false, ctx)\n\t\t\tfixFeature(data.config.feature_true, ctx)\n\t\t\tbreak\n\t\tcase 'random_selector':\n\t\t\tdata.config.features.forEach((e: any) => fixFeature(e.feature, ctx))\n\t\t\tfixFeature(data.config.default, ctx)\n\t\t\tbreak\n\t\tcase 'simple_random_selector':\n\t\t\tdata.config.features.forEach((feature: any) => fixFeature(feature, ctx))\n\t\t\tbreak\n\t\tcase 'flower':\n\t\tcase 'no_bonemeal_flower':\n\t\tcase 'random_patch':\n\t\t\tif (data.config.xspread !== data.config.zspread) {\n\t\t\t\tctx.warn('Random patch xspread and zspread can no longer be different. Using xspread.')\n\t\t\t}\n\t\t\tconst filters: any[] = []\n\t\t\tif (data.config.can_replace !== true) {\n\t\t\t\tfilters.push({\n\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\tblocks: ['minecraft:air'],\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (isNonEmptyList(data.config.whitelist)) {\n\t\t\t\tfilters.push({\n\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\tblocks: getBlockIds(data.config.whitelist),\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (isNonEmptyList(data.config.blacklist)) {\n\t\t\t\tfilters.push({\n\t\t\t\t\ttype: 'minecraft:not',\n\t\t\t\t\tpredicate: {\n\t\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\t\tblocks: getBlockIds(data.config.blacklist),\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst placer = data.config.block_placer.type.replace(/^minecraft:/, '')\n\t\t\tconst feature = placer === 'column_placer' ? {\n\t\t\t\ttype: 'minecraft:block_column',\n\t\t\t\tconfig: {\n\t\t\t\t\tdirection: 'up',\n\t\t\t\t\tallowed_placement: data.config.can_replace !== true ? {\n\t\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\t\tblocks: ['minecraft:air'],\n\t\t\t\t\t} : { type: 'minecraft:true' },\n\t\t\t\t\tprioritize_tip: false,\n\t\t\t\t\tlayers: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: data.config.block_placer.size,\n\t\t\t\t\t\t\tprovider: data.config.state_provider,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t} : {\n\t\t\t\ttype: 'minecraft:simple_block',\n\t\t\t\tconfig: {\n\t\t\t\t\tto_place: data.config.state_provider,\n\t\t\t\t},\n\t\t\t}\n\t\t\tdata.config = {\n\t\t\t\ttries: data.config.tries,\n\t\t\t\txz_spread: data.config.xspread,\n\t\t\t\ty_spread: data.config.yspread,\n\t\t\t\tfeature: decorated(feature, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'minecraft:block_filter',\n\t\t\t\t\t\tconfig: {\n\t\t\t\t\t\t\tpredicate: {\n\t\t\t\t\t\t\t\ttype: 'minecraft:all_of',\n\t\t\t\t\t\t\t\tpredicates: filters,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]),\n\t\t\t}\n\t\t\tif (data.config.project === true) {\n\t\t\t\tdata.config = {\n\t\t\t\t\tdecorator: {\n\t\t\t\t\t\ttype: 'heightmap',\n\t\t\t\t\t\tconfig: {\n\t\t\t\t\t\t\theightmap: 'OCEAN_FLOOR',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\ttype: data.type,\n\t\t\t\t\t\tconfig: data.config,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t\tdata.type = 'minecraft:decorated'\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'growing_plant':\n\t\t\tdata.type = 'minecraft:block_column'\n\t\t\tdata.config = {\n\t\t\t\tdirection: data.config.direction,\n\t\t\t\tallowed_placement: data.config.allow_water !== true ? {\n\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\tblocks: ['minecraft:air'],\n\t\t\t\t} : { type: 'minecraft:true' },\n\t\t\t\tprioritize_tip: true,\n\t\t\t\tlayers: [\n\t\t\t\t\t{\n\t\t\t\t\t\theight: {\n\t\t\t\t\t\t\ttype: 'minecraft:weighted_list',\n\t\t\t\t\t\t\tdistribution: data.config.height_distribution.map((e: any) => ({\n\t\t\t\t\t\t\t\tweight: e.weight,\n\t\t\t\t\t\t\t\tdata: deltaIntProvider(e.data, -1),\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprovider: data.config.body_provider,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\theight: 1,\n\t\t\t\t\t\tprovider: data.config.head_provider,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'simple_block':\n\t\t\tconst filters2 = []\n\t\t\tif (isNonEmptyList(data.config.place_on)) {\n\t\t\t\tfilters2.push({\n\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\toffset: [0, -1, 0],\n\t\t\t\t\tblocks: getBlockIds(data.config.place_on),\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (isNonEmptyList(data.config.place_in)) {\n\t\t\t\tfilters2.push({\n\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\tblocks: getBlockIds(data.config.place_in),\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (isNonEmptyList(data.config.place_under)) {\n\t\t\t\tfilters2.push({\n\t\t\t\t\ttype: 'minecraft:matching_blocks',\n\t\t\t\t\toffset: [0, 1, 0],\n\t\t\t\t\tblocks: getBlockIds(data.config.place_under),\n\t\t\t\t})\n\t\t\t}\n\t\t\tdata.config.place_on = undefined\n\t\t\tdata.config.place_in = undefined\n\t\t\tdata.config.place_under = undefined\n\t\t\tif (filters2.length > 0) {\n\t\t\t\tdata.type = 'minecraft:decorated',\n\t\t\t\tdata.config = {\n\t\t\t\t\tdecorator: {\n\t\t\t\t\t\ttype: 'minecraft:block_filter',\n\t\t\t\t\t\tconfig: {\n\t\t\t\t\t\t\tpredicate: filters2.length == 1 ? filters2[0] : {\n\t\t\t\t\t\t\t\ttype: 'minecraft:all_of',\n\t\t\t\t\t\t\t\tpredicates: filters2,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\ttype: 'minecraft:simple_block',\n\t\t\t\t\t\tconfig: data.config,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'small_dripstone':\n\t\t\tconst pointed_dripstone = (surface: string) => decorated({\n\t\t\t\ttype: 'minecraft:pointed_dripstone',\n\t\t\t\tconfig: {\n\t\t\t\t\tchance_of_taller_dripstone: data.config.chance_of_taller_dripstone,\n\t\t\t\t\tchance_of_directional_spread: 0.7,\n\t\t\t\t\tchance_of_spread_radius2: 0.5,\n\t\t\t\t\tchance_of_spread_radius3: 0.5,\n\t\t\t\t},\n\t\t\t}, [{\n\t\t\t\ttype: 'minecraft:cave_surface',\n\t\t\t\tconfig: {\n\t\t\t\t\tsurface,\n\t\t\t\t\tfloor_to_ceiling_search_range: 12,\n\t\t\t\t\tallow_water: true,\n\t\t\t\t},\n\t\t\t}])\n\t\t\tdata.type = 'minecraft:decorated'\n\t\t\tdata.config = decorated({\n\t\t\t\ttype: 'minecraft:simple_random_selector',\n\t\t\t\tconfig: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tpointed_dripstone('floor'),\n\t\t\t\t\t\tpointed_dripstone('ceiling'),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t}, [\n\t\t\t\t{\n\t\t\t\t\ttype: 'count',\n\t\t\t\t\tconfig: {\n\t\t\t\t\t\tcount: {\n\t\t\t\t\t\t\ttype: 'minecraft:uniform',\n\t\t\t\t\t\t\tvalue: { min_inclusive: 1, max_inclusive: data.config.max_placements },\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'minecraft:scatter',\n\t\t\t\t\tconfig: {\n\t\t\t\t\t\txz_spread: {\n\t\t\t\t\t\t\ttype: 'minecraft:clamped_normal',\n\t\t\t\t\t\t\tvalue: { mean: 0.0, deviation: 3.0, min_inclusive: -10, max_inclusive: 10 },\n\t\t\t\t\t\t},\n\t\t\t\t\t\ty_spread: {\n\t\t\t\t\t\t\ttype: 'minecraft:clamped_normal',\n\t\t\t\t\t\t\tvalue: { mean: 0.0, deviation: 0.6, min_inclusive: -2, max_inclusive: 2 },\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]).config\n\t\t\tbreak\n\t}\n}\n\nfunction deltaIntProvider(data: any, delta: number): any {\n\tif (typeof data === 'number') return data + delta\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'constant':\n\t\t\treturn {\n\t\t\t\ttype: data.type,\n\t\t\t\tvalue: data.value + delta,\n\t\t\t}\n\t\tcase 'uniform':\n\t\tcase 'biased_to_bottom':\n\t\t\treturn {\n\t\t\t\ttype: data.type,\n\t\t\t\tvalue: {\n\t\t\t\t\tmin_inclusive: data.min_inclusive + delta,\n\t\t\t\t\tmax_inclusive: data.max_inclusive + delta,\n\t\t\t\t},\n\t\t\t}\n\t\tcase 'clamped':\n\t\t\treturn {\n\t\t\t\ttype: data.type,\n\t\t\t\tvalue: {\n\t\t\t\t\tmin_inclusive: data.min_inclusive + delta,\n\t\t\t\t\tmax_inclusive: data.max_inclusive + delta,\n\t\t\t\t\tsource: deltaIntProvider(data.source, delta),\n\t\t\t\t},\n\t\t\t}\n\t}\n\tthrow new Error(`Unknown int provider \"${type}\"`)\n}\n\nfunction fixDecorator(data: any, ctx: FixContext) {\n\tif (typeof data !== 'object') return\n\n\tconst type = data.type.replace(/^minecraft:/, '')\n\tswitch (type) {\n\t\tcase 'decorated':\n\t\t\tfixDecorator(data.config.outer, ctx)\n\t\t\tfixDecorator(data.config.inner, ctx)\n\t\t\tbreak\n\t\tcase 'cave_surface':\n\t\t\tdata.config.allow_water = false\n\t\t\tbreak\n\t\tcase 'heightmap_spread_double':\n\t\t\tctx.warn('Removed decorator \"heightmap_spread_double\" was replaced with \"heightmap\". You likely need to make this feature rarer.')\n\t\t\tdata.type = 'minecraft:heightmap'\n\t\t\tbreak\n\t\tcase 'spread_32_above':\n\t\t\tctx.warn('Removed decorator \"spread_32_above\". You likely need to make this feature rarer.')\n\t\t\tdata.type = 'minecraft:nope'\n\t\t\tbreak\n\t}\n}\n\nfunction decorated(feature: any, decorators: any[] = []): any {\n\tif (decorators.length == 0) {\n\t\treturn feature\n\t}\n\treturn {\n\t\ttype: 'minecraft:decorated',\n\t\tconfig: {\n\t\t\tdecorator: decorators[0],\n\t\t\tfeature: decorated(feature, decorators.slice(1)),\n\t\t},\n\t}\n}\n\nfunction isNonEmptyList(obj: unknown): obj is unknown[] {\n\treturn Array.isArray(obj) && obj.length > 0\n}\n\nfunction getBlockIds(states: any[]) {\n\treturn [...new Set(states.map((state: any) => state.Name))]\n}\n","import { Fix } from '../../Fix'\nimport { Advancement } from './Advancement'\nimport { Biome } from './Biome'\nimport { Dimension } from './Dimension'\nimport { Feature } from './Feature'\n\nexport const Fixes21w44a = Fix.all(\n\tFix.debug('21w44a fixes'),\n\tFix.assert(pack => pack.meta.data.pack.pack_format < 8, 'This pack already has pack_format 8 or higher and cannot be upgraded.'),\n\tFix.when('predicates', Advancement),\n\tFix.when('worldgen',\n\t\tDimension,\n\t\tFeature,\n\t\tBiome,\n\t),\n\tFix.when('packFormat', pack => pack.meta.data.pack.pack_format = 8),\n)\n","import { Fix } from '../Fix'\nimport { Fixes17 } from './1.17'\nimport { Fixes18 } from './1.18'\nimport { Fixes21w44a } from './21w44a'\n\nexport const Fixes = Fix.all(\n\tFix.version('1.16.5', '1.17.1', Fixes17),\n\tFix.version('1.17.1', '21w44a', Fixes21w44a),\n\tFix.version('21w44a', '1.18-pre5', Fixes18),\n)\n","import detectIndent from 'detect-indent'\nimport JSZip from 'jszip'\nimport stripJsonComments from 'strip-json-comments'\nimport type { FixConfig, FixContext } from './Fix'\nimport { Fixes } from './fixes'\nimport type { Version } from './Version'\n\nexport const categories = [\n\t'advancements',\n\t'dimension',\n\t'dimension_type',\n\t'loot_tables',\n\t'predicates',\n\t'tags/blocks',\n\t'tags/items',\n\t'worldgen/biome',\n\t'worldgen/configured_carver',\n\t'worldgen/configured_feature',\n\t'worldgen/configured_structure_feature',\n\t'worldgen/configured_surface_builder',\n\t'worldgen/noise_settings',\n\t'worldgen/placed_feature',\n\t'worldgen/processor_list',\n\t'worldgen/template_pool',\n] as const\n\nexport type PackFile = {\n\tname: string,\n\tdata: any,\n\tindent?: string,\n}\n\nexport type Pack = {\n\tname: string,\n\tzip: JSZip,\n\tmeta: PackFile,\n\tdata: {\n\t\t[category: string]: PackFile[],\n\t},\n}\n\nexport namespace Pack {\n\texport async function fromZip(file: File): Promise<Pack> {\n\t\tconst buffer = await file.arrayBuffer()\n\t\tconst zip = await JSZip.loadAsync(buffer)\n\n\t\tconst pack: Pack = { name: file.name, zip, data: {} } as Pack\n\t\tawait Promise.all(categories.map(async category => {\n\t\t\tpack.data[category] = await loadCategory(zip, category)\n\t\t}))\n\t\tpack.data.functions = await loadFunctions(zip)\n\t\tpack.meta = { name: 'pack', ...await loadJson(zip, 'pack.mcmeta') }\n\t\tconsole.log(pack)\n\t\treturn pack\n\t}\n\n\tasync function loadCategory(zip: JSZip, category: string): Promise<PackFile[]> {\n\t\tconst matcher = new RegExp(`^data\\/([^\\/]+)\\/${category}\\/(.*)\\.json$`)\n\t\treturn Promise.all(Object.keys(zip.files)\n\t\t\t.map(f => f.match(matcher)).filter(m => m)\n\t\t\t.map(async m => ({\n\t\t\t\tname: `${m![1]}:${m![2]}`,\n\t\t\t\t...await loadJson(zip, m![0]),\n\t\t\t}))\n\t\t)\n\t}\n\n\tasync function loadJson(zip: JSZip, path: string) {\n\t\tlet text = await loadText(zip, path)\n\t\tconst indent = detectIndent(text).indent\n\t\ttry {\n\t\t\ttext = text.replaceAll('\\u200B', '').replaceAll('\\u200C', '').replaceAll('\\u200D', '').replaceAll('\\uFEFF', '')\n\t\t\ttext = text.split('\\n').map(l => l.replace(/^([^\"\\/]+)\\/\\/.*/, '$1')).join('\\n')\n\t\t\treturn { data: JSON.parse(stripJsonComments(text)), indent }\n\t\t} catch (e: any) {\n\t\t\tthrow new Error(`Cannot parse \"${path}\": ${e.message}.`)\n\t\t}\n\t}\n\n\tasync function loadFunctions(zip: JSZip): Promise<PackFile[]> {\n\t\tconst matcher = /^data\\/([^\\/]+)\\/functions\\/(.*)\\.mcfunction$/\n\t\treturn Promise.all(Object.keys(zip.files)\n\t\t\t.map(f => f.match(matcher)).filter(m => m)\n\t\t\t.map(async m => ({\n\t\t\t\tname: `${m![1]}:${m![2]}`,\n\t\t\t\tdata: (await loadText(zip, m![0])).split('\\n'),\n\t\t\t}))\n\t\t)\n\t}\n\n\tasync function loadText(zip: JSZip, path: string) {\n\t\tconst file = zip.files[path]\n\t\tif (!file) {\n\t\t\tthrow new Error(`Cannot find \"${path}\".`)\n\t\t}\n\t\treturn await file.async('text')\n\t}\n\n\texport async function toZip(pack: Pack) {\n\t\tcategories.forEach(category => {\n\t\t\twriteCategory(pack.zip, category, pack.data[category])\n\t\t})\n\t\twriteFunctions(pack.zip, pack.data.functions)\n\t\twriteJson(pack.zip, 'pack.mcmeta', pack.meta.data, pack.meta.indent)\n\t\tconst blob = await pack.zip.generateAsync({ type: 'blob', compression: 'DEFLATE' })\n\t\treturn URL.createObjectURL(blob)\n\t}\n\n\tfunction writeCategory(zip: JSZip, category: string, data: PackFile[]) {\n\t\tdata.forEach(({ name, data, indent }) => {\n\t\t\tconst [namespace, path] = name.split(':')\n\t\t\twriteJson(zip, `data/${namespace}/${category}/${path}.json`, data, indent)\n\t\t})\n\t}\n\n\tfunction writeFunctions(zip: JSZip, functions: PackFile[]) {\n\t\tfunctions.forEach(({ name, data }) => {\n\t\t\tconst [namespace, path] = name.split(':')\n\t\t\twriteText(zip, `data/${namespace}/functions/${path}.mcfunction`, data.join('\\n'))\n\t\t})\n\t}\n\n\tfunction writeJson(zip: JSZip, path: string, data: any, indent?: string) {\n\t\tconst text = JSON.stringify(data, null, indent) + '\\n'\n\t\twriteText(zip, path, text)\n\t}\n\n\tfunction writeText(zip: JSZip, path: string, data: any) {\n\t\tzip.file(path, data)\n\t}\n\n\texport async function upgrade(pack: Pack, config: FixConfig, source: Version, target: Version) {\n\t\tconst warnings: string[] = []\n\t\tconst ctx: FixContext = {\n\t\t\twarn: (message: string) => warnings.push(message),\n\t\t\tconfig: (key: keyof FixConfig) => config[key],\n\t\t\tread: (category: string, name: string) => {\n\t\t\t\treturn pack.data[category].find(f =>\n\t\t\t\t\tf.name.replace(/^minecraft:/, '') === name.replace(/^minecraft:/, ''))\n\t\t\t},\n\t\t\tcreate: (category: string, name: string, data: any) => {\n\t\t\t\tpack.data[category].push({\n\t\t\t\t\tname: name,\n\t\t\t\t\tindent: pack.meta.indent,\n\t\t\t\t\tdata,\n\t\t\t\t})\n\t\t\t},\n\t\t\tsource: () => source,\n\t\t\ttarget: () => target,\n\t\t}\n\t\tFixes(pack, ctx)\n\t\treturn { warnings }\n\t}\n}\n","import type { Version } from './Version'\nimport { Versions } from './Version'\n\ntype Config = {\n\tsource?: string,\n\ttarget?: string,\n}\n\nexport namespace Store {\n\tconst KEY = 'misode_upgrader_config'\n\n\tfunction get(): Config {\n\t\treturn JSON.parse(localStorage.getItem(KEY) ?? '{}')\n\t}\n\n\tfunction set(config: Partial<Config>) {\n\t\tconst data = { ...get(), ...config }\n\t\tlocalStorage.setItem(KEY, JSON.stringify(data))\n\t}\n\n\texport function getSource(): Version {\n\t\tconst source = get().source\n\t\tif (source && Versions.includes(source as Version)) {\n\t\t\treturn source as Version\n\t\t}\n\t\treturn '1.16.5'\n\t}\n\n\texport function setSource(source: Version) {\n\t\tset({ source })\n\t}\n\n\texport function getTarget(): Version {\n\t\tconst target = get().target\n\t\tif (target && Versions.includes(target as Version)) {\n\t\t\treturn target as Version\n\t\t}\n\t\treturn '1.17.1'\n\t}\n\n\texport function setTarget(target: Version) {\n\t\tset({ target })\n\t}\n}\n","import { useEffect, useState } from 'preact/hooks'\nimport type { FixConfig } from '../Fix'\nimport { Pack } from '../Pack'\nimport type { Version } from '../Version'\nimport { Octicon } from './Octicon'\n\ntype PackCardProps = {\n\tpack: Pack,\n\tconfig: FixConfig,\n\tsource: Version,\n\ttarget: Version,\n\tonError: (error: Error) => unknown,\n}\nexport function PackCard({ pack, config, source, target, onError }: PackCardProps) {\n\tconst [status, setStatus] = useState('Loading...')\n\tconst [download, setDownload] = useState<string | null>(null)\n\tconst [alerts, setAlerts] = useState<string[]>([])\n\tconst [error, setError] = useState<string | null>(null)\n\tconst [alertsHidden, setAlertsHidden] = useState(false)\n\n\tconst downloadName = pack.name.replace(/\\.zip$/, `_${target}.zip`)\n\tconst problems: Record<string, string[]> = {}\n\talerts.forEach(a => {\n\t\tif (a.match(/^[a-z0-9_-]+:[a-z0-9/_-]+ /)) {\n\t\t\tconst [file, ...name] = a.split(' ');\n\t\t\t(problems[name.join(' ')] ??= []).push(file)\n\t\t} else {\n\t\t\tproblems[a] = []\n\t\t}\n\t})\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tsetStatus('Upgrading...')\n\t\t\t\tconst { warnings } = await Pack.upgrade(pack, config, source, target)\n\t\t\t\tawait new Promise(res => setTimeout(res, 500))\n\t\t\t\tif (warnings) setAlerts(warnings)\n\n\t\t\t\tsetStatus('Zipping...')\n\t\t\t\tconst download = await Pack.toZip(pack)\n\t\t\t\tsetDownload(download)\n\t\t\t} catch (e: any) {\n\t\t\t\tonError(e)\n\t\t\t\tsetError('Error during upgrading')\n\t\t\t}\n\t\t})()\n\t}, [pack])\n\n\tconst toggleAlerts = () => {\n\t\tsetAlertsHidden(!alertsHidden)\n\t}\n\n\treturn <div class=\"pack\">\n\t\t<div class=\"pack-head\">\n\t\t\t{download && <a class=\"pack-status download\" href={download} download={downloadName} data-hover={`Download data pack for ${target}`}>\n\t\t\t\t{Octicon.download}\n\t\t\t</a>}\n\t\t\t{(!download && !error) && <div class=\"pack-status loading\" data-hover={status}>\n\t\t\t\t{Octicon.sync}\n\t\t\t</div>}\n\t\t\t{(alerts.length > 0 || error) && <div class={`pack-status alert${error ? ' error' : ''}`} onClick={toggleAlerts} data-hover={error ?? 'There were issues upgrading'}>\n\t\t\t\t{Octicon.alert}\n\t\t\t</div>}\n\t\t\t<span class=\"pack-name\">{pack.name.replace(/\\.zip$/, '')}</span>\n\t\t</div>\n\t\t{(alerts.length > 0 && !alertsHidden) && <div class=\"pack-body\">\n\t\t\t{Object.entries(problems).map(([name, files]) => <div class=\"pack-alert\">\n\t\t\t\t<div class=\"alert-name\">{name}</div>\n\t\t\t\t{files.length > 0 && <>\n\t\t\t\t\t<p>Affected files:</p>\n\t\t\t\t\t<div class=\"alert-files\">{files.map(file => <p>{file}</p>)}</div>\n\t\t\t\t</>}\n\t\t\t</div>)}\n\t\t</div>}\n\t</div>\n}\n","import { useRef } from 'preact/hooks'\nimport type { Version } from '../Version'\nimport { Versions } from '../Version'\n\ntype VersionPickerProps = {\n\tvalue: Version,\n\tonChange: (version: Version) => unknown,\n}\nexport function VersionPicker({ value, onChange }: VersionPickerProps) {\n\tconst select = useRef<HTMLSelectElement>(null)\n\tconst change = () => {\n\t\tonChange(select.current.value as Version)\n\t}\n\treturn <select class=\"version-picker\" ref={select} value={value} onChange={change}>\n\t\t{Versions.map(v => <option value={v}>{v}</option>)}\n\t</select>\n}\n","import { useState } from 'preact/hooks'\nimport { Config } from './components/Config'\nimport { Octicon } from './components/Octicon'\nimport { PackCard } from './components/PackCard'\nimport { VersionPicker } from './components/VersionPicker'\nimport type { FixConfig } from './Fix'\nimport { Pack } from './Pack'\nimport { Store } from './Store'\nimport { Version } from './Version'\n\nexport type AppError = {\n\tprocess: 'loading' | 'upgrading',\n\terror: Error,\n}\n\nexport function App() {\n\tconst [packs, setPacks] = useState<Pack[]>([])\n\tconst [errors, setErrors] = useState<AppError[]>([])\n\tconst [source, setSource] = useState<Version>(Store.getSource())\n\tconst [target, setTarget] = useState<Version>(Store.getTarget())\n\tconst [config, setConfig] = useState<FixConfig>({\n\t\tfunctions: true,\n\t\tids: true,\n\t\tpredicates: true,\n\t\tworldgen: true,\n\t\tpackFormat: true,\n\t})\n\tconst changeSource = (source: Version) => {\n\t\tStore.setSource(source)\n\t\tsetSource(source)\n\t}\n\tconst changeTarget = (target: Version) => {\n\t\tStore.setTarget(target)\n\t\tsetTarget(target)\n\t}\n\n\tconst onDrop = async (e: DragEvent) => {\n\t\te.preventDefault()\n\t\tif(!e.dataTransfer) return\n\n\t\tconst promises = []\n\t\tfor (let i = 0; i < e.dataTransfer.files.length; i++) {\n\t\t\tconst file = e.dataTransfer.files[i]\n\t\t\tif (file.type.match(/^application\\/(x-)?zip(-compressed)?$/)) {\n\t\t\t\tpromises.push(Pack.fromZip(file))\n\t\t\t}\n\t\t}\n\t\tif (promises.length === 0) {\n\t\t\tsetErrors([...errors, {\n\t\t\t\tprocess: 'loading',\n\t\t\t\terror: new Error('The dropped files contain no zip files. Please zip the data pack first.'),\n\t\t\t}])\n\t\t} else {\n\t\t\tconst newPacks = await Promise.all(promises.map(async promise => {\n\t\t\t\ttry {\n\t\t\t\t\treturn await promise\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tsetErrors([...errors, { process: 'loading', error }])\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}))\n\t\t\tsetPacks([...packs, ...newPacks.filter((p): p is Pack => p !== undefined)])\n\t\t}\n\t}\n\n\tconst onUpgradeError = (error: Error) => {\n\t\tconsole.error(error)\n\t\tsetErrors([...errors, { process: 'upgrading', error }])\n\t}\n\n\treturn <main onDrop={onDrop} onDragOver={e => e.preventDefault()}>\n\t\t{packs.length > 0 && <>\n\t\t\t<div class=\"packs\">\n\t\t\t\t{packs.map(pack => <PackCard {...{pack, config, source, target}} onError={onUpgradeError} />)}\n\t\t\t</div>\n\t\t</>}\n\t\t<div class=\"drop\">\n\t\t\t<h1>Drop data pack here</h1>\n\t\t\t<p>Convert from <VersionPicker value={source} onChange={changeSource}/> to <VersionPicker value={target} onChange={changeTarget}/></p>\n\t\t\t{!Version.order(source, target)\n\t\t\t\t? <p class=\"error-message\">Invalid versions</p>\n\t\t\t\t: Version.includes(source, target, '1.17.1', '21w44a')\n\t\t\t\t\t? <p class=\"error-message\">This upgrade is still being worked on...</p>\n\t\t\t\t\t: null}\n\t\t</div>\n\t\t<div class=\"configs\">\n\t\t\t<Config name=\"Upgrade functions\" value={config.functions} onChange={v => setConfig({ ...config, functions: v })} />\n\t\t\t<Config name=\"Upgrade IDs\" value={config.ids} onChange={v => setConfig({ ...config, ids: v })} />\n\t\t\t<Config name=\"Upgrade JSON files\" value={config.predicates} onChange={v => setConfig({ ...config, predicates: v })} />\n\t\t\t<Config name=\"Upgrade worldgen\" value={config.worldgen} onChange={v => setConfig({ ...config, worldgen: v })} />\n\t\t\t<Config name=\"Upgrade pack_format\" value={config.packFormat} onChange={v => setConfig({ ...config, packFormat: v })} />\n\t\t</div>\n\t\t<div class=\"footer\">\n\t\t\t<p>Developed by Misode</p>\n\t\t\t<p>Source code on <a href=\"https://github.com/misode/upgrader\" target=\"_blank\">GitHub</a></p>\n\t\t</div>\n\t\t<div class=\"main-errors\">\n\t\t\t{errors.map(e => {\n\t\t\t\tconst title = `${e.error.name}: ${e.error.message}`\n\t\t\t\tconst body = `An error occurred while ${e.process} a data pack.\\nData Pack: <!-- ATTACH YOUR DATAPACK HERE -->\\n\\n\\`\\`\\`\\n${e.error.stack}\\n\\`\\`\\`\\n`\n\t\t\t\tconst url = `https://github.com/misode/upgrader/issues/new?title=${encodeURIComponent(title)}&body=${encodeURIComponent(body)}\\n`\n\t\t\t\treturn <div class=\"main-error\">\n\t\t\t\t\t<p>Something went wrong {e.process} the data pack:</p>\n\t\t\t\t\t<p class=\"error-message\">{e.error.message}</p>\n\t\t\t\t\t<p>You can report this as a bug <a href={url} target=\"_blank\">on GitHub</a> and upload the data pack</p>\n\t\t\t\t\t<div class=\"error-close\" onClick={() => setErrors(errors.filter(f => f.error.message !== e.error.message || f.process !== e.process))}>{Octicon.x}</div>\n\t\t\t\t</div>})}\n\t\t</div>\n\t</main>\n}\n","import { render } from 'preact'\nimport { App } from './App'\nimport './style.css'\n\nrender(<App/>, document.body)\n"],"names":["class","type","checked","value","onChange","e","target","name","alert","xmlns","viewBox","width","height","fill-rule","d","download","sync","x","Versions","Version","Fix","Fix2","Version2","version","indexOf","ord","order","before","after","includes","source","from","to","all","fixes","pack","ctx","forEach","fix","onFile","category","file","data","fileCtx","__spreadProps","warn","message","error","Error","replace","replaceAll","stack","when","key","config","assert","predicate","debug","Carver","fixCarver","carvers","air","liquid","lava_level","above_bottom","aquifers_enabled","y","min_inclusive","absolute","max_inclusive","below_top","inner","yScale","horizontal_radius_multiplier","vertical_radius_multiplier","floor_level","vertical_rotation","max_exclusive","shape","distance_factor","thickness","min","max","plateau","width_smoothness","horizontal_radius_factor","vertical_radius_default_factor","vertical_radius_center_factor","DimensionType","fixDimensionType","min_y","Feature","fixFeature","Array","isArray","starts","decorator","feature","targets","predicate_type","block_state","state","placer","block_placer","size","min_size","extra_size","max_empty_corners_allowed","fossil_processors","overlay_processors","fossil_structures","overlay_structures","r","radius","base","spread","Math","discard_chance_on_air_exposure","feature_false","feature_true","features","default","to_place","fixUniformInt","foliage_placer","k","foliage_provider","leaves_provider","force_dirt","dirt_provider","Name","sapling_provider","getSapling","Properties","stage","combinedDecorators","max_water_depth","heightmap","foliage","match","probability","chance","step","Number","isInteger","count","extra_count","extra_chance","c","min0","max0","outer","chance2","ceil","count2","bottom_offset","maximum","top_offset","min2","max2","cutoff","min3","max3","baseline","decorators","length","slice","replaceitemRegex","timeObjectiveRegex","Function","line","i","startsWith","Ids","fixTag","values","_","fixIds","NoiseSettings","fixNoiseSettings","generator","settings","bedrock_roof_position","bedrock_floor_position","min_surface_level","noise_caves_enabled","noodle_caves_enabled","deepslate_enabled","ore_veins_enabled","noise","Predicates","fixCondition","criteria","fixCriterion","pools","fixPool","conditions","entity","player","parent","partner","child","villager","zombie","projectile","shooter","victims","fixEntity","item","items","fixItem","damage","killing_blow","location","entered","exited","entries","fixEntry","children","condition","source_entity","direct_entity","equipment","vehicle","targeted_entity","block","blocks","StructureFeature","fixStructureFeature","Fixes17","meta","pack_format","f","create","placement","player_spawn_friendly","map","flatMap","replacement","str","id","FeatureRemovals","has","read","fixFeatureId","find","p","push","collectDecorators","can_be_placed_on","Set","b","fluid","barrier","spread_width","spread_height","refPlacedFeature","allowed_tree_position","max_height","vegetation_feature","__spreadValues","steps","floor_to_ceiling_search_range","direction_of_search","surface","target_condition","allowed_search_condition","allow_water","max_steps","factors","some","primeFactors","n","counts","filter","j","reduce","a2","every","distribution","weight","round","fixDecorator","xz_spread","y_spread","divisor","JSON","parse","surface_rule","sequence","s2","fixSurfaceRule","if_true","then_run","invert","offset","add_surface_depth","add_run_depth","add_surface_secondary_depth","surface_depth_multiplier","run_depth_multiplier","Fixes18","Advancement","trigger","distance","mergePlayerLocation","start_position","Biome","depth","scale","surface_builder","Dimension","biomes","biome","seed","preset","altitude_noise","temperature_noise","humidity_noise","weirdness_noise","parameters","temperature","humidity","continentalness","altitude","erosion","weirdness","fixBiomeSource","biome_source","top_slide","bottom_slide","simplex_surface_noise","random_density_offset","terrain_shaper","density_offset","factor","density_factor","jaggedness","rules","conditionType","conditionData","ifTrue","random_name","true_at_and_below","false_at_and_above","thenRun","result_state","axis","ruleType","ruleData","feature2","xspread","zspread","filters","can_replace","isNonEmptyList","whitelist","getBlockIds","blacklist","direction","allowed_placement","prioritize_tip","layers","provider","state_provider","tries","yspread","decorated","predicates","project","height_distribution","deltaIntProvider","body_provider","head_provider","filters2","place_on","place_in","place_under","pointed_dripstone","chance_of_taller_dripstone","chance_of_directional_spread","chance_of_spread_radius2","chance_of_spread_radius3","max_placements","mean","deviation","delta","obj","states","Fixes21w44a","Fixes","categories","Pack","Store","onError","status","setStatus","useState","setDownload","alerts","setAlerts","setError","alertsHidden","setAlertsHidden","downloadName","problems","split","join","warnings","upgrade","Promise","setTimeout","res","download2","toZip","href","data-hover","Octicon","onClick","Object","files","select","useRef","ref","current","v","packs","setPacks","errors","setErrors","setSource","getSource","setTarget","getTarget","setConfig","functions","ids","worldgen","packFormat","onUpgradeError","process","onDrop","async","preventDefault","dataTransfer","promises","fromZip","newPacks","promise","onDragOver","PackCard","VersionPicker","source2","target2","Config","title","body","url","encodeURIComponent","Pack2","zip","path","text","loadText","indent","detectIndent","l2","stripJsonComments","stringify","buffer","arrayBuffer","JSZip","loadAsync","matcher","RegExp","keys","m","loadJson","loadCategory","loadFunctions","log","namespace","data2","blob","generateAsync","compression","URL","createObjectURL","Store2","KEY","getItem","get","setItem","render","App","document"],"mappings":"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"}